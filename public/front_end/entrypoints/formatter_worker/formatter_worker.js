import*as e from"../../core/platform/platform.js";import*as t from"../../core/root/root.js";import*as r from"../../third_party/acorn/acorn.js";import*as n from"../../models/text_utils/text_utils.js";import*as i from"../../third_party/acorn-loose/acorn-loose.js";var a;!function(){function e(e,t,r){for(var n in t||(t={}),e)!e.hasOwnProperty(n)||!1===r&&t.hasOwnProperty(n)||(t[n]=e[n]);return t}function t(e,t,r,n,i){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var a=n||0,o=i||0;;){var s=e.indexOf("\t",a);if(s<0||s>=t)return o+(t-a);o+=s-a,o+=r-o%r,a=s+1}}function r(){}var n=function(e,t,r){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=r};n.prototype.eol=function(){return this.pos>=this.string.length},n.prototype.sol=function(){return this.pos==this.lineStart},n.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},n.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},n.prototype.eat=function(e){var t=this.string.charAt(this.pos);if("string"==typeof e?t==e:t&&(e.test?e.test(t):e(t)))return++this.pos,t},n.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},n.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},n.prototype.skipToEnd=function(){this.pos=this.string.length},n.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},n.prototype.backUp=function(e){this.pos-=e},n.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=t(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?t(this.string,this.lineStart,this.tabSize):0)},n.prototype.indentation=function(){return t(this.string,null,this.tabSize)-(this.lineStart?t(this.string,this.lineStart,this.tabSize):0)},n.prototype.match=function(e,t,r){if("string"!=typeof e){var n=this.string.slice(this.pos).match(e);return n&&n.index>0?null:(n&&!1!==t&&(this.pos+=n[0].length),n)}var i=function(e){return r?e.toLowerCase():e};if(i(this.string.substr(this.pos,e.length))==i(e))return!1!==t&&(this.pos+=e.length),!0},n.prototype.current=function(){return this.string.slice(this.start,this.pos)},n.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},n.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},n.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};var i={},a={};function o(t){if("string"==typeof t&&a.hasOwnProperty(t))t=a[t];else if(t&&"string"==typeof t.name&&a.hasOwnProperty(t.name)){var n=a[t.name];"string"==typeof n&&(n={name:n}),i=n,s=t,Object.create?l=Object.create(i):(r.prototype=i,l=new r),s&&e(s,l),(t=l).name=n.name}else{if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return o("application/xml");if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+json$/.test(t))return o("application/json")}var i,s,l;return"string"==typeof t?{name:t}:t||{name:"null"}}var s={};var l,c={__proto__:null,modes:i,mimeModes:a,defineMode:function(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),i[e]=t},defineMIME:function(e,t){a[e]=t},resolveMode:o,getMode:function e(t,r){r=o(r);var n=i[r.name];if(!n)return e(t,"text/plain");var a=n(t,r);if(s.hasOwnProperty(r.name)){var l=s[r.name];for(var c in l)l.hasOwnProperty(c)&&(a.hasOwnProperty(c)&&(a["_"+c]=a[c]),a[c]=l[c])}if(a.name=r.name,r.helperType&&(a.helperType=r.helperType),r.modeProps)for(var u in r.modeProps)a[u]=r.modeProps[u];return a},modeExtensions:s,extendMode:function(t,r){e(r,s.hasOwnProperty(t)?s[t]:s[t]={})},copyState:function(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var r={};for(var n in t){var i=t[n];i instanceof Array&&(i=i.concat([])),r[n]=i}return r},innerMode:function(e,t){for(var r;e.innerMode&&(r=e.innerMode(t))&&r.mode!=e;)t=r.state,e=r.mode;return r||{mode:e,state:t}},startState:function(e,t,r){return!e.startState||e.startState(t,r)}},u="undefined"!=typeof globalThis?globalThis:window;for(var d in u.CodeMirror={},CodeMirror.StringStream=n,c)CodeMirror[d]=c[d];CodeMirror.defineMode("null",(function(){return{token:function(e){return e.skipToEnd()}}})),CodeMirror.defineMIME("text/plain","null"),CodeMirror.registerHelper=CodeMirror.registerGlobalHelper=Math.min,CodeMirror.splitLines=function(e){return e.split(/\r?\n|\r/)},CodeMirror.countColumn=t,CodeMirror.defaults={indentUnit:2},l=function(e){e.runMode=function(t,r,n,i){var a=e.getMode(e.defaults,r),o=i&&i.tabSize||e.defaults.tabSize;if(n.appendChild){var s=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<9),l=n,c=0;l.innerHTML="",n=function(e,t){if("\n"==e)return l.appendChild(document.createTextNode(s?"\r":e)),void(c=0);for(var r="",n=0;;){var i=e.indexOf("\t",n);if(-1==i){r+=e.slice(n),c+=e.length-n;break}c+=i-n,r+=e.slice(n,i);var a=o-c%o;c+=a;for(var u=0;u<a;++u)r+=" ";n=i+1}if(t){var d=l.appendChild(document.createElement("span"));d.className="cm-"+t.replace(/ +/g," cm-"),d.appendChild(document.createTextNode(r))}else l.appendChild(document.createTextNode(r))}}for(var u=e.splitLines(t),d=i&&i.state||e.startState(a),p=0,f=u.length;p<f;++p){p&&n("\n");var m=new e.StringStream(u[p],null,{lookAhead:function(e){return u[p+e]},baseToken:function(){}});for(!m.string&&a.blankLine&&a.blankLine(d);!m.eol();){var h=a.token(m,d);n(m.current(),h,p,m.start,d,a),m.start=m.pos}}}},"object"==typeof exports&&"object"==typeof module?l(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],l):l(CodeMirror)}(),a=function(e){function t(e){for(var t={},r=0;r<e.length;++r)t[e[r].toLowerCase()]=!0;return t}e.defineMode("css",(function(t,r){var n=r.inline;r.propertyKeywords||(r=e.resolveMode("text/css"));var i,a,o=t.indentUnit,s=r.tokenHooks,l=r.documentTypes||{},c=r.mediaTypes||{},u=r.mediaFeatures||{},d=r.mediaValueKeywords||{},p=r.propertyKeywords||{},f=r.nonStandardPropertyKeywords||{},m=r.fontProperties||{},h=r.counterDescriptors||{},g=r.colorKeywords||{},b=r.valueKeywords||{},y=r.allowNested,k=r.lineComment,w=!0===r.supportsAtComponent,v=!1!==t.highlightNonStandardPropertyKeywords;function x(e,t){return i=t,e}function S(e,t){var r=e.next();if(s[r]){var n=s[r](e,t);if(!1!==n)return n}return"@"==r?(e.eatWhile(/[\w\\\-]/),x("def",e.current())):"="==r||("~"==r||"|"==r)&&e.eat("=")?x(null,"compare"):'"'==r||"'"==r?(t.tokenize=T(r),t.tokenize(e,t)):"#"==r?(e.eatWhile(/[\w\\\-]/),x("atom","hash")):"!"==r?(e.match(/^\s*\w*/),x("keyword","important")):/\d/.test(r)||"."==r&&e.eat(/\d/)?(e.eatWhile(/[\w.%]/),x("number","unit")):"-"!==r?/[,+>*\/]/.test(r)?x(null,"select-op"):"."==r&&e.match(/^-?[_a-z][_a-z0-9-]*/i)?x("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(r)?x(null,r):e.match(/^[\w-.]+(?=\()/)?(/^(url(-prefix)?|domain|regexp)$/i.test(e.current())&&(t.tokenize=C),x("variable callee","variable")):/[\w\\\-]/.test(r)?(e.eatWhile(/[\w\\\-]/),x("property","word")):x(null,null):/[\d.]/.test(e.peek())?(e.eatWhile(/[\w.%]/),x("number","unit")):e.match(/^-[\w\\\-]*/)?(e.eatWhile(/[\w\\\-]/),e.match(/^\s*:/,!1)?x("variable-2","variable-definition"):x("variable-2","variable")):e.match(/^\w+-/)?x("meta","meta"):void 0}function T(e){return function(t,r){for(var n,i=!1;null!=(n=t.next());){if(n==e&&!i){")"==e&&t.backUp(1);break}i=!i&&"\\"==n}return(n==e||!i&&")"!=e)&&(r.tokenize=null),x("string","string")}}function C(e,t){return e.next(),e.match(/^\s*[\"\')]/,!1)?t.tokenize=null:t.tokenize=T(")"),x(null,"(")}function E(e,t,r){this.type=e,this.indent=t,this.prev=r}function O(e,t,r,n){return e.context=new E(r,t.indentation()+(!1===n?0:o),e.context),r}function L(e){return e.context.prev&&(e.context=e.context.prev),e.context.type}function z(e,t,r){return N[r.context.type](e,t,r)}function M(e,t,r,n){for(var i=n||1;i>0;i--)r.context=r.context.prev;return z(e,t,r)}function I(e){var t=e.current().toLowerCase();a=b.hasOwnProperty(t)?"atom":g.hasOwnProperty(t)?"keyword":"variable"}var N={top:function(e,t,r){if("{"==e)return O(r,t,"block");if("}"==e&&r.context.prev)return L(r);if(w&&/@component/i.test(e))return O(r,t,"atComponentBlock");if(/^@(-moz-)?document$/i.test(e))return O(r,t,"documentTypes");if(/^@(media|supports|(-moz-)?document|import)$/i.test(e))return O(r,t,"atBlock");if(/^@(font-face|counter-style)/i.test(e))return r.stateArg=e,"restricted_atBlock_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/i.test(e))return"keyframes";if(e&&"@"==e.charAt(0))return O(r,t,"at");if("hash"==e)a="builtin";else if("word"==e)a="tag";else{if("variable-definition"==e)return"maybeprop";if("interpolation"==e)return O(r,t,"interpolation");if(":"==e)return"pseudo";if(y&&"("==e)return O(r,t,"parens")}return r.context.type},block:function(e,t,r){if("word"==e){var n=t.current().toLowerCase();return p.hasOwnProperty(n)?(a="property","maybeprop"):f.hasOwnProperty(n)?(a=v?"string-2":"property","maybeprop"):y?(a=t.match(/^\s*:(?:\s|$)/,!1)?"property":"tag","block"):(a+=" error","maybeprop")}return"meta"==e?"block":y||"hash"!=e&&"qualifier"!=e?N.top(e,t,r):(a="error","block")},maybeprop:function(e,t,r){return":"==e?O(r,t,"prop"):z(e,t,r)},prop:function(e,t,r){if(";"==e)return L(r);if("{"==e&&y)return O(r,t,"propBlock");if("}"==e||"{"==e)return M(e,t,r);if("("==e)return O(r,t,"parens");if("hash"!=e||/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(t.current())){if("word"==e)I(t);else if("interpolation"==e)return O(r,t,"interpolation")}else a+=" error";return"prop"},propBlock:function(e,t,r){return"}"==e?L(r):"word"==e?(a="property","maybeprop"):r.context.type},parens:function(e,t,r){return"{"==e||"}"==e?M(e,t,r):")"==e?L(r):"("==e?O(r,t,"parens"):"interpolation"==e?O(r,t,"interpolation"):("word"==e&&I(t),"parens")},pseudo:function(e,t,r){return"meta"==e?"pseudo":"word"==e?(a="variable-3",r.context.type):z(e,t,r)},documentTypes:function(e,t,r){return"word"==e&&l.hasOwnProperty(t.current())?(a="tag",r.context.type):N.atBlock(e,t,r)},atBlock:function(e,t,r){if("("==e)return O(r,t,"atBlock_parens");if("}"==e||";"==e)return M(e,t,r);if("{"==e)return L(r)&&O(r,t,y?"block":"top");if("interpolation"==e)return O(r,t,"interpolation");if("word"==e){var n=t.current().toLowerCase();a="only"==n||"not"==n||"and"==n||"or"==n?"keyword":c.hasOwnProperty(n)?"attribute":u.hasOwnProperty(n)?"property":d.hasOwnProperty(n)?"keyword":p.hasOwnProperty(n)?"property":f.hasOwnProperty(n)?v?"string-2":"property":b.hasOwnProperty(n)?"atom":g.hasOwnProperty(n)?"keyword":"error"}return r.context.type},atComponentBlock:function(e,t,r){return"}"==e?M(e,t,r):"{"==e?L(r)&&O(r,t,y?"block":"top",!1):("word"==e&&(a="error"),r.context.type)},atBlock_parens:function(e,t,r){return")"==e?L(r):"{"==e||"}"==e?M(e,t,r,2):N.atBlock(e,t,r)},restricted_atBlock_before:function(e,t,r){return"{"==e?O(r,t,"restricted_atBlock"):"word"==e&&"@counter-style"==r.stateArg?(a="variable","restricted_atBlock_before"):z(e,t,r)},restricted_atBlock:function(e,t,r){return"}"==e?(r.stateArg=null,L(r)):"word"==e?(a="@font-face"==r.stateArg&&!m.hasOwnProperty(t.current().toLowerCase())||"@counter-style"==r.stateArg&&!h.hasOwnProperty(t.current().toLowerCase())?"error":"property","maybeprop"):"restricted_atBlock"},keyframes:function(e,t,r){return"word"==e?(a="variable","keyframes"):"{"==e?O(r,t,"top"):z(e,t,r)},at:function(e,t,r){return";"==e?L(r):"{"==e||"}"==e?M(e,t,r):("word"==e?a="tag":"hash"==e&&(a="builtin"),"at")},interpolation:function(e,t,r){return"}"==e?L(r):"{"==e||";"==e?M(e,t,r):("word"==e?a="variable":"variable"!=e&&"("!=e&&")"!=e&&(a="error"),"interpolation")}};return{startState:function(e){return{tokenize:null,state:n?"block":"top",stateArg:null,context:new E(n?"block":"top",e||0,null)}},token:function(e,t){if(!t.tokenize&&e.eatSpace())return null;var r=(t.tokenize||S)(e,t);return r&&"object"==typeof r&&(i=r[1],r=r[0]),a=r,"comment"!=i&&(t.state=N[t.state](i,e,t)),a},indent:function(e,t){var r=e.context,n=t&&t.charAt(0),i=r.indent;return"prop"!=r.type||"}"!=n&&")"!=n||(r=r.prev),r.prev&&("}"!=n||"block"!=r.type&&"top"!=r.type&&"interpolation"!=r.type&&"restricted_atBlock"!=r.type?(")"!=n||"parens"!=r.type&&"atBlock_parens"!=r.type)&&("{"!=n||"at"!=r.type&&"atBlock"!=r.type)||(i=Math.max(0,r.indent-o)):i=(r=r.prev).indent),i},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",lineComment:k,fold:"brace"}}));var r=["domain","regexp","url","url-prefix"],n=t(r),i=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],a=t(i),o=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid","orientation","device-pixel-ratio","min-device-pixel-ratio","max-device-pixel-ratio","pointer","any-pointer","hover","any-hover","prefers-color-scheme"],s=t(o),l=["landscape","portrait","none","coarse","fine","on-demand","hover","interlace","progressive","dark","light"],c=t(l),u=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","all","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","binding","bleed","block-size","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-gap","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-gap","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","left","letter-spacing","line-break","line-height","line-height-step","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","place-content","place-items","place-self","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotate","rotation","rotation-point","row-gap","ruby-align","ruby-overhang","ruby-position","ruby-span","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-type","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-orientation","text-outline","text-overflow","text-rendering","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","touch-action","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-select","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","paint-order","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],d=t(u),p=["border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","margin-block","margin-block-end","margin-block-start","margin-inline","margin-inline-end","margin-inline-start","padding-block","padding-block-end","padding-block-start","padding-inline","padding-inline-end","padding-inline-start","scroll-snap-stop","scrollbar-3d-light-color","scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-track-color","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","shape-inside","zoom"],f=t(p),m=t(["font-display","font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"]),h=t(["additive-symbols","fallback","negative","pad","prefix","range","speak-as","suffix","symbols","system"]),g=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],b=t(g),y=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","devanagari","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","georgian","graytext","grid","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hard-light","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","hue","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","luminosity","malayalam","manipulation","match","matrix","matrix3d","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","multiple_mask_images","multiply","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","opacity","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","self-start","self-end","semi-condensed","semi-expanded","separate","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","somali","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","square-button","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"],k=t(y),w=r.concat(i).concat(o).concat(l).concat(u).concat(p).concat(g).concat(y);function v(e,t){for(var r,n=!1;null!=(r=e.next());){if(n&&"/"==r){t.tokenize=null;break}n="*"==r}return["comment","comment"]}e.registerHelper("hintWords","css",w),e.defineMIME("text/css",{documentTypes:n,mediaTypes:a,mediaFeatures:s,mediaValueKeywords:c,propertyKeywords:d,nonStandardPropertyKeywords:f,fontProperties:m,counterDescriptors:h,colorKeywords:b,valueKeywords:k,tokenHooks:{"/":function(e,t){return!!e.eat("*")&&(t.tokenize=v,v(e,t))}},name:"css"}),e.defineMIME("text/x-scss",{mediaTypes:a,mediaFeatures:s,mediaValueKeywords:c,propertyKeywords:d,nonStandardPropertyKeywords:f,colorKeywords:b,valueKeywords:k,fontProperties:m,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(e,t){return e.eat("/")?(e.skipToEnd(),["comment","comment"]):e.eat("*")?(t.tokenize=v,v(e,t)):["operator","operator"]},":":function(e){return!!e.match(/^\s*\{/,!1)&&[null,null]},$:function(e){return e.match(/^[\w-]+/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(e){return!!e.eat("{")&&[null,"interpolation"]}},name:"css",helperType:"scss"}),e.defineMIME("text/x-less",{mediaTypes:a,mediaFeatures:s,mediaValueKeywords:c,propertyKeywords:d,nonStandardPropertyKeywords:f,colorKeywords:b,valueKeywords:k,fontProperties:m,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(e,t){return e.eat("/")?(e.skipToEnd(),["comment","comment"]):e.eat("*")?(t.tokenize=v,v(e,t)):["operator","operator"]},"@":function(e){return e.eat("{")?[null,"interpolation"]:!e.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/i,!1)&&(e.eatWhile(/[\w\\\-]/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"}),e.defineMIME("text/x-gss",{documentTypes:n,mediaTypes:a,mediaFeatures:s,propertyKeywords:d,nonStandardPropertyKeywords:f,fontProperties:m,counterDescriptors:h,colorKeywords:b,valueKeywords:k,supportsAtComponent:!0,tokenHooks:{"/":function(e,t){return!!e.eat("*")&&(t.tokenize=v,v(e,t))}},name:"css",helperType:"gss"})},"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}((function(e){var t={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},r={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};e.defineMode("xml",(function(n,i){var a,o,s=n.indentUnit,l={},c=i.htmlMode?t:r;for(var u in c)l[u]=c[u];for(var u in i)l[u]=i[u];function d(e,t){function r(r){return t.tokenize=r,r(e,t)}var n=e.next();return"<"==n?e.eat("!")?e.eat("[")?e.match("CDATA[")?r(f("atom","]]>")):null:e.match("--")?r(f("comment","--\x3e")):e.match("DOCTYPE",!0,!0)?(e.eatWhile(/[\w\._\-]/),r(m(1))):null:e.eat("?")?(e.eatWhile(/[\w\._\-]/),t.tokenize=f("meta","?>"),"meta"):(a=e.eat("/")?"closeTag":"openTag",t.tokenize=p,"tag bracket"):"&"==n?(e.eat("#")?e.eat("x")?e.eatWhile(/[a-fA-F\d]/)&&e.eat(";"):e.eatWhile(/[\d]/)&&e.eat(";"):e.eatWhile(/[\w\.\-:]/)&&e.eat(";"))?"atom":"error":(e.eatWhile(/[^&<]/),null)}function p(e,t){var r,n,i=e.next();if(">"==i||"/"==i&&e.eat(">"))return t.tokenize=d,a=">"==i?"endTag":"selfcloseTag","tag bracket";if("="==i)return a="equals",null;if("<"==i){t.tokenize=d,t.state=y,t.tagName=t.tagStart=null;var o=t.tokenize(e,t);return o?o+" tag error":"tag error"}return/[\'\"]/.test(i)?(t.tokenize=(r=i,n=function(e,t){for(;!e.eol();)if(e.next()==r){t.tokenize=p;break}return"string"},n.isInAttribute=!0,n),t.stringStartCol=e.column(),t.tokenize(e,t)):(e.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function f(e,t){return function(r,n){for(;!r.eol();){if(r.match(t)){n.tokenize=d;break}r.next()}return e}}function m(e){return function(t,r){for(var n;null!=(n=t.next());){if("<"==n)return r.tokenize=m(e+1),r.tokenize(t,r);if(">"==n){if(1==e){r.tokenize=d;break}return r.tokenize=m(e-1),r.tokenize(t,r)}}return"meta"}}function h(e,t,r){this.prev=e.context,this.tagName=t||"",this.indent=e.indented,this.startOfLine=r,(l.doNotIndent.hasOwnProperty(t)||e.context&&e.context.noIndent)&&(this.noIndent=!0)}function g(e){e.context&&(e.context=e.context.prev)}function b(e,t){for(var r;;){if(!e.context)return;if(r=e.context.tagName,!l.contextGrabbers.hasOwnProperty(r)||!l.contextGrabbers[r].hasOwnProperty(t))return;g(e)}}function y(e,t,r){return"openTag"==e?(r.tagStart=t.column(),k):"closeTag"==e?w:y}function k(e,t,r){return"word"==e?(r.tagName=t.current(),o="tag",S):l.allowMissingTagName&&"endTag"==e?(o="tag bracket",S(e,t,r)):(o="error",k)}function w(e,t,r){if("word"==e){var n=t.current();return r.context&&r.context.tagName!=n&&l.implicitlyClosed.hasOwnProperty(r.context.tagName)&&g(r),r.context&&r.context.tagName==n||!1===l.matchClosing?(o="tag",v):(o="tag error",x)}return l.allowMissingTagName&&"endTag"==e?(o="tag bracket",v(e,t,r)):(o="error",x)}function v(e,t,r){return"endTag"!=e?(o="error",v):(g(r),y)}function x(e,t,r){return o="error",v(e,0,r)}function S(e,t,r){if("word"==e)return o="attribute",T;if("endTag"==e||"selfcloseTag"==e){var n=r.tagName,i=r.tagStart;return r.tagName=r.tagStart=null,"selfcloseTag"==e||l.autoSelfClosers.hasOwnProperty(n)?b(r,n):(b(r,n),r.context=new h(r,n,i==r.indented)),y}return o="error",S}function T(e,t,r){return"equals"==e?C:(l.allowMissing||(o="error"),S(e,0,r))}function C(e,t,r){return"string"==e?E:"word"==e&&l.allowUnquoted?(o="string",S):(o="error",S(e,0,r))}function E(e,t,r){return"string"==e?E:S(e,0,r)}return d.isInText=!0,{startState:function(e){var t={tokenize:d,state:y,indented:e||0,tagName:null,tagStart:null,context:null};return null!=e&&(t.baseIndent=e),t},token:function(e,t){if(!t.tagName&&e.sol()&&(t.indented=e.indentation()),e.eatSpace())return null;a=null;var r=t.tokenize(e,t);return(r||a)&&"comment"!=r&&(o=null,t.state=t.state(a||r,e,t),o&&(r="error"==o?r+" error":o)),r},indent:function(t,r,n){var i=t.context;if(t.tokenize.isInAttribute)return t.tagStart==t.indented?t.stringStartCol+1:t.indented+s;if(i&&i.noIndent)return e.Pass;if(t.tokenize!=p&&t.tokenize!=d)return n?n.match(/^(\s*)/)[0].length:0;if(t.tagName)return!1!==l.multilineTagIndentPastTag?t.tagStart+t.tagName.length+2:t.tagStart+s*(l.multilineTagIndentFactor||1);if(l.alignCDATA&&/<!\[CDATA\[/.test(r))return 0;var a=r&&/^<(\/)?([\w_:\.-]*)/.exec(r);if(a&&a[1])for(;i;){if(i.tagName==a[2]){i=i.prev;break}if(!l.implicitlyClosed.hasOwnProperty(i.tagName))break;i=i.prev}else if(a)for(;i;){var o=l.contextGrabbers[i.tagName];if(!o||!o.hasOwnProperty(a[2]))break;i=i.prev}for(;i&&i.prev&&!i.startOfLine;)i=i.prev;return i?i.indent+s:t.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:l.htmlMode?"html":"xml",helperType:l.htmlMode?"html":"xml",skipAttribute:function(e){e.state==C&&(e.state=S)},xmlCurrentTag:function(e){return e.tagName?{name:e.tagName,close:"closeTag"==e.type}:null},xmlCurrentContext:function(e){for(var t=[],r=e.context;r;r=r.prev)t.push(r.tagName);return t.reverse()}}})),e.defineMIME("text/xml","xml"),e.defineMIME("application/xml","xml"),e.mimeModes.hasOwnProperty("text/html")||e.defineMIME("text/html",{name:"xml",htmlMode:!0})})),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}((function(e){e.defineMode("javascript",(function(t,r){var n,i,a=t.indentUnit,o=r.statementIndent,s=r.jsonld,l=r.json||s,c=!1!==r.trackScope,u=r.typescript,d=r.wordCharacters||/[\w$\xa1-\uffff]/,p=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),r=e("keyword b"),n=e("keyword c"),i=e("keyword d"),a=e("operator"),o={type:"atom",style:"atom"};return{if:e("if"),while:t,with:t,else:r,do:r,try:r,finally:r,return:i,break:i,continue:i,new:e("new"),delete:n,void:n,throw:n,debugger:e("debugger"),var:e("var"),const:e("var"),let:e("var"),function:e("function"),catch:e("catch"),for:e("for"),switch:e("switch"),case:e("case"),default:e("default"),in:a,typeof:a,instanceof:a,true:o,false:o,null:o,undefined:o,NaN:o,Infinity:o,this:e("this"),class:e("class"),super:e("atom"),yield:n,export:e("export"),import:e("import"),extends:n,await:n}}(),f=/[+\-*&%=<>!?|~^@]/,m=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function h(e,t,r){return n=e,i=r,t}function g(e,t){var r,n=e.next();if('"'==n||"'"==n)return t.tokenize=(r=n,function(e,t){var n,i=!1;if(s&&"@"==e.peek()&&e.match(m))return t.tokenize=g,h("jsonld-keyword","meta");for(;null!=(n=e.next())&&(n!=r||i);)i=!i&&"\\"==n;return i||(t.tokenize=g),h("string","string")}),t.tokenize(e,t);if("."==n&&e.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return h("number","number");if("."==n&&e.match(".."))return h("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(n))return h(n);if("="==n&&e.eat(">"))return h("=>","operator");if("0"==n&&e.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return h("number","number");if(/\d/.test(n))return e.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),h("number","number");if("/"==n)return e.eat("*")?(t.tokenize=b,b(e,t)):e.eat("/")?(e.skipToEnd(),h("comment","comment")):Ge(e,t,1)?(function(e){for(var t,r=!1,n=!1;null!=(t=e.next());){if(!r){if("/"==t&&!n)return;"["==t?n=!0:n&&"]"==t&&(n=!1)}r=!r&&"\\"==t}}(e),e.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),h("regexp","string-2")):(e.eat("="),h("operator","operator",e.current()));if("`"==n)return t.tokenize=y,y(e,t);if("#"==n&&"!"==e.peek())return e.skipToEnd(),h("meta","meta");if("#"==n&&e.eatWhile(d))return h("variable","property");if("<"==n&&e.match("!--")||"-"==n&&e.match("->")&&!/\S/.test(e.string.slice(0,e.start)))return e.skipToEnd(),h("comment","comment");if(f.test(n))return">"==n&&t.lexical&&">"==t.lexical.type||(e.eat("=")?"!"!=n&&"="!=n||e.eat("="):/[<>*+\-|&?]/.test(n)&&(e.eat(n),">"==n&&e.eat(n))),"?"==n&&e.eat(".")?h("."):h("operator","operator",e.current());if(d.test(n)){e.eatWhile(d);var i=e.current();if("."!=t.lastType){if(p.propertyIsEnumerable(i)){var a=p[i];return h(a.type,a.style,i)}if("async"==i&&e.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return h("async","keyword",i)}return h("variable","variable",i)}}function b(e,t){for(var r,n=!1;r=e.next();){if("/"==r&&n){t.tokenize=g;break}n="*"==r}return h("comment","comment")}function y(e,t){for(var r,n=!1;null!=(r=e.next());){if(!n&&("`"==r||"$"==r&&e.eat("{"))){t.tokenize=g;break}n=!n&&"\\"==r}return h("quasi","string-2",e.current())}function k(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var r=e.string.indexOf("=>",e.start);if(!(r<0)){if(u){var n=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(e.string.slice(e.start,r));n&&(r=n.index)}for(var i=0,a=!1,o=r-1;o>=0;--o){var s=e.string.charAt(o),l="([{}])".indexOf(s);if(l>=0&&l<3){if(!i){++o;break}if(0==--i){"("==s&&(a=!0);break}}else if(l>=3&&l<6)++i;else if(d.test(s))a=!0;else if(/["'\/`]/.test(s))for(;;--o){if(0==o)return;if(e.string.charAt(o-1)==s&&"\\"!=e.string.charAt(o-2)){o--;break}}else if(a&&!i){++o;break}}a&&!i&&(t.fatArrowAt=o)}}var w={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function v(e,t,r,n,i,a){this.indented=e,this.column=t,this.type=r,this.prev=i,this.info=a,null!=n&&(this.align=n)}function x(e,t){if(!c)return!1;for(var r=e.localVars;r;r=r.next)if(r.name==t)return!0;for(var n=e.context;n;n=n.prev)for(r=n.vars;r;r=r.next)if(r.name==t)return!0}var S={state:null,column:null,marked:null,cc:null};function T(){for(var e=arguments.length-1;e>=0;e--)S.cc.push(arguments[e])}function C(){return T.apply(null,arguments),!0}function E(e,t){for(var r=t;r;r=r.next)if(r.name==e)return!0;return!1}function O(e){var t=S.state;if(S.marked="def",c){if(t.context)if("var"==t.lexical.info&&t.context&&t.context.block){var n=L(e,t.context);if(null!=n)return void(t.context=n)}else if(!E(e,t.localVars))return void(t.localVars=new I(e,t.localVars));r.globalVars&&!E(e,t.globalVars)&&(t.globalVars=new I(e,t.globalVars))}}function L(e,t){if(t){if(t.block){var r=L(e,t.prev);return r?r==t.prev?t:new M(r,t.vars,!0):null}return E(e,t.vars)?t:new M(t.prev,new I(e,t.vars),!1)}return null}function z(e){return"public"==e||"private"==e||"protected"==e||"abstract"==e||"readonly"==e}function M(e,t,r){this.prev=e,this.vars=t,this.block=r}function I(e,t){this.name=e,this.next=t}var N=new I("this",new I("arguments",null));function j(){S.state.context=new M(S.state.context,S.state.localVars,!1),S.state.localVars=N}function P(){S.state.context=new M(S.state.context,S.state.localVars,!0),S.state.localVars=null}function A(){S.state.localVars=S.state.context.vars,S.state.context=S.state.context.prev}function _(e,t){var r=function(){var r=S.state,n=r.indented;if("stat"==r.lexical.type)n=r.lexical.indented;else for(var i=r.lexical;i&&")"==i.type&&i.align;i=i.prev)n=i.indented;r.lexical=new v(n,S.stream.column(),e,null,r.lexical,t)};return r.lex=!0,r}function V(){var e=S.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function F(e){return function t(r){return r==e?C():";"==e||"}"==r||")"==r||"]"==r?T():C(t)}}function B(e,t){return"var"==e?C(_("vardef",t),ve,F(";"),V):"keyword a"==e?C(_("form"),R,B,V):"keyword b"==e?C(_("form"),B,V):"keyword d"==e?S.stream.match(/^\s*$/,!1)?C():C(_("stat"),K,F(";"),V):"debugger"==e?C(F(";")):"{"==e?C(_("}"),P,se,V,A):";"==e?C():"if"==e?("else"==S.state.lexical.info&&S.state.cc[S.state.cc.length-1]==V&&S.state.cc.pop()(),C(_("form"),R,B,V,Oe)):"function"==e?C(Ie):"for"==e?C(_("form"),P,Le,B,A,V):"class"==e||u&&"interface"==t?(S.marked="keyword",C(_("form","class"==e?e:t),_e,V)):"variable"==e?u&&"declare"==t?(S.marked="keyword",C(B)):u&&("module"==t||"enum"==t||"type"==t)&&S.stream.match(/^\s*\w/,!1)?(S.marked="keyword","enum"==t?C(Je):"type"==t?C(je,F("operator"),pe,F(";")):C(_("form"),xe,F("{"),_("}"),se,V,V)):u&&"namespace"==t?(S.marked="keyword",C(_("form"),W,B,V)):u&&"abstract"==t?(S.marked="keyword",C(B)):C(_("stat"),ee):"switch"==e?C(_("form"),R,F("{"),_("}","switch"),P,se,V,V,A):"case"==e?C(W,F(":")):"default"==e?C(F(":")):"catch"==e?C(_("form"),j,q,B,V,A):"export"==e?C(_("stat"),qe,V):"import"==e?C(_("stat"),De,V):"async"==e?C(B):"@"==t?C(W,B):T(_("stat"),W,F(";"),V)}function q(e){if("("==e)return C(Pe,F(")"))}function W(e,t){return $(e,t,!1)}function D(e,t){return $(e,t,!0)}function R(e){return"("!=e?T():C(_(")"),K,F(")"),V)}function $(e,t,r){if(S.state.fatArrowAt==S.stream.start){var n=r?X:G;if("("==e)return C(j,_(")"),ae(Pe,")"),V,F("=>"),n,A);if("variable"==e)return T(j,xe,F("=>"),n,A)}var i=r?H:U;return w.hasOwnProperty(e)?C(i):"function"==e?C(Ie,i):"class"==e||u&&"interface"==t?(S.marked="keyword",C(_("form"),Ae,V)):"keyword c"==e||"async"==e?C(r?D:W):"("==e?C(_(")"),K,F(")"),V,i):"operator"==e||"spread"==e?C(r?D:W):"["==e?C(_("]"),He,V,i):"{"==e?oe(re,"}",null,i):"quasi"==e?T(J,i):"new"==e?C(function(e){return function(t){return"."==t?C(e?Q:Z):"variable"==t&&u?C(ye,e?H:U):T(e?D:W)}}(r)):C()}function K(e){return e.match(/[;\}\)\],]/)?T():T(W)}function U(e,t){return","==e?C(K):H(e,t,!1)}function H(e,t,r){var n=0==r?U:H,i=0==r?W:D;return"=>"==e?C(j,r?X:G,A):"operator"==e?/\+\+|--/.test(t)||u&&"!"==t?C(n):u&&"<"==t&&S.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?C(_(">"),ae(pe,">"),V,n):"?"==t?C(W,F(":"),i):C(i):"quasi"==e?T(J,n):";"!=e?"("==e?oe(D,")","call",n):"."==e?C(te,n):"["==e?C(_("]"),K,F("]"),V,n):u&&"as"==t?(S.marked="keyword",C(pe,n)):"regexp"==e?(S.state.lastType=S.marked="operator",S.stream.backUp(S.stream.pos-S.stream.start-1),C(i)):void 0:void 0}function J(e,t){return"quasi"!=e?T():"${"!=t.slice(t.length-2)?C(J):C(W,Y)}function Y(e){if("}"==e)return S.marked="string-2",S.state.tokenize=y,C(J)}function G(e){return k(S.stream,S.state),T("{"==e?B:W)}function X(e){return k(S.stream,S.state),T("{"==e?B:D)}function Z(e,t){if("target"==t)return S.marked="keyword",C(U)}function Q(e,t){if("target"==t)return S.marked="keyword",C(H)}function ee(e){return":"==e?C(V,B):T(U,F(";"),V)}function te(e){if("variable"==e)return S.marked="property",C()}function re(e,t){return"async"==e?(S.marked="property",C(re)):"variable"==e||"keyword"==S.style?(S.marked="property","get"==t||"set"==t?C(ne):(u&&S.state.fatArrowAt==S.stream.start&&(r=S.stream.match(/^\s*:\s*/,!1))&&(S.state.fatArrowAt=S.stream.pos+r[0].length),C(ie))):"number"==e||"string"==e?(S.marked=s?"property":S.style+" property",C(ie)):"jsonld-keyword"==e?C(ie):u&&z(t)?(S.marked="keyword",C(re)):"["==e?C(W,le,F("]"),ie):"spread"==e?C(D,ie):"*"==t?(S.marked="keyword",C(re)):":"==e?T(ie):void 0;var r}function ne(e){return"variable"!=e?T(ie):(S.marked="property",C(Ie))}function ie(e){return":"==e?C(D):"("==e?T(Ie):void 0}function ae(e,t,r){function n(i,a){if(r?r.indexOf(i)>-1:","==i){var o=S.state.lexical;return"call"==o.info&&(o.pos=(o.pos||0)+1),C((function(r,n){return r==t||n==t?T():T(e)}),n)}return i==t||a==t?C():r&&r.indexOf(";")>-1?T(e):C(F(t))}return function(r,i){return r==t||i==t?C():T(e,n)}}function oe(e,t,r){for(var n=3;n<arguments.length;n++)S.cc.push(arguments[n]);return C(_(t,r),ae(e,t),V)}function se(e){return"}"==e?C():T(B,se)}function le(e,t){if(u){if(":"==e)return C(pe);if("?"==t)return C(le)}}function ce(e,t){if(u&&(":"==e||"in"==t))return C(pe)}function ue(e){if(u&&":"==e)return S.stream.match(/^\s*\w+\s+is\b/,!1)?C(W,de,pe):C(pe)}function de(e,t){if("is"==t)return S.marked="keyword",C()}function pe(e,t){return"keyof"==t||"typeof"==t||"infer"==t||"readonly"==t?(S.marked="keyword",C("typeof"==t?D:pe)):"variable"==e||"void"==t?(S.marked="type",C(be)):"|"==t||"&"==t?C(pe):"string"==e||"number"==e||"atom"==e?C(be):"["==e?C(_("]"),ae(pe,"]",","),V,be):"{"==e?C(_("}"),me,V,be):"("==e?C(ae(ge,")"),fe,be):"<"==e?C(ae(pe,">"),pe):void 0}function fe(e){if("=>"==e)return C(pe)}function me(e){return e.match(/[\}\)\]]/)?C():","==e||";"==e?C(me):T(he,me)}function he(e,t){return"variable"==e||"keyword"==S.style?(S.marked="property",C(he)):"?"==t||"number"==e||"string"==e?C(he):":"==e?C(pe):"["==e?C(F("variable"),ce,F("]"),he):"("==e?T(Ne,he):e.match(/[;\}\)\],]/)?void 0:C()}function ge(e,t){return"variable"==e&&S.stream.match(/^\s*[?:]/,!1)||"?"==t?C(ge):":"==e?C(pe):"spread"==e?C(ge):T(pe)}function be(e,t){return"<"==t?C(_(">"),ae(pe,">"),V,be):"|"==t||"."==e||"&"==t?C(pe):"["==e?C(pe,F("]"),be):"extends"==t||"implements"==t?(S.marked="keyword",C(pe)):"?"==t?C(pe,F(":"),pe):void 0}function ye(e,t){if("<"==t)return C(_(">"),ae(pe,">"),V,be)}function ke(){return T(pe,we)}function we(e,t){if("="==t)return C(pe)}function ve(e,t){return"enum"==t?(S.marked="keyword",C(Je)):T(xe,le,Ce,Ee)}function xe(e,t){return u&&z(t)?(S.marked="keyword",C(xe)):"variable"==e?(O(t),C()):"spread"==e?C(xe):"["==e?oe(Te,"]"):"{"==e?oe(Se,"}"):void 0}function Se(e,t){return"variable"!=e||S.stream.match(/^\s*:/,!1)?("variable"==e&&(S.marked="property"),"spread"==e?C(xe):"}"==e?T():"["==e?C(W,F("]"),F(":"),Se):C(F(":"),xe,Ce)):(O(t),C(Ce))}function Te(){return T(xe,Ce)}function Ce(e,t){if("="==t)return C(D)}function Ee(e){if(","==e)return C(ve)}function Oe(e,t){if("keyword b"==e&&"else"==t)return C(_("form","else"),B,V)}function Le(e,t){return"await"==t?C(Le):"("==e?C(_(")"),ze,V):void 0}function ze(e){return"var"==e?C(ve,Me):"variable"==e?C(Me):T(Me)}function Me(e,t){return")"==e?C():";"==e?C(Me):"in"==t||"of"==t?(S.marked="keyword",C(W,Me)):T(W,Me)}function Ie(e,t){return"*"==t?(S.marked="keyword",C(Ie)):"variable"==e?(O(t),C(Ie)):"("==e?C(j,_(")"),ae(Pe,")"),V,ue,B,A):u&&"<"==t?C(_(">"),ae(ke,">"),V,Ie):void 0}function Ne(e,t){return"*"==t?(S.marked="keyword",C(Ne)):"variable"==e?(O(t),C(Ne)):"("==e?C(j,_(")"),ae(Pe,")"),V,ue,A):u&&"<"==t?C(_(">"),ae(ke,">"),V,Ne):void 0}function je(e,t){return"keyword"==e||"variable"==e?(S.marked="type",C(je)):"<"==t?C(_(">"),ae(ke,">"),V):void 0}function Pe(e,t){return"@"==t&&C(W,Pe),"spread"==e?C(Pe):u&&z(t)?(S.marked="keyword",C(Pe)):u&&"this"==e?C(le,Ce):T(xe,le,Ce)}function Ae(e,t){return"variable"==e?_e(e,t):Ve(e,t)}function _e(e,t){if("variable"==e)return O(t),C(Ve)}function Ve(e,t){return"<"==t?C(_(">"),ae(ke,">"),V,Ve):"extends"==t||"implements"==t||u&&","==e?("implements"==t&&(S.marked="keyword"),C(u?pe:W,Ve)):"{"==e?C(_("}"),Fe,V):void 0}function Fe(e,t){return"async"==e||"variable"==e&&("static"==t||"get"==t||"set"==t||u&&z(t))&&S.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?(S.marked="keyword",C(Fe)):"variable"==e||"keyword"==S.style?(S.marked="property",C(Be,Fe)):"number"==e||"string"==e?C(Be,Fe):"["==e?C(W,le,F("]"),Be,Fe):"*"==t?(S.marked="keyword",C(Fe)):u&&"("==e?T(Ne,Fe):";"==e||","==e?C(Fe):"}"==e?C():"@"==t?C(W,Fe):void 0}function Be(e,t){if("?"==t)return C(Be);if(":"==e)return C(pe,Ce);if("="==t)return C(D);var r=S.state.lexical.prev;return T(r&&"interface"==r.info?Ne:Ie)}function qe(e,t){return"*"==t?(S.marked="keyword",C(Ue,F(";"))):"default"==t?(S.marked="keyword",C(W,F(";"))):"{"==e?C(ae(We,"}"),Ue,F(";")):T(B)}function We(e,t){return"as"==t?(S.marked="keyword",C(F("variable"))):"variable"==e?T(D,We):void 0}function De(e){return"string"==e?C():"("==e?T(W):"."==e?T(U):T(Re,$e,Ue)}function Re(e,t){return"{"==e?oe(Re,"}"):("variable"==e&&O(t),"*"==t&&(S.marked="keyword"),C(Ke))}function $e(e){if(","==e)return C(Re,$e)}function Ke(e,t){if("as"==t)return S.marked="keyword",C(Re)}function Ue(e,t){if("from"==t)return S.marked="keyword",C(W)}function He(e){return"]"==e?C():T(ae(D,"]"))}function Je(){return T(_("form"),xe,F("{"),_("}"),ae(Ye,"}"),V,V)}function Ye(){return T(xe,Ce)}function Ge(e,t,r){return t.tokenize==g&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(t.lastType)||"quasi"==t.lastType&&/\{\s*$/.test(e.string.slice(0,e.pos-(r||0)))}return A.lex=!0,V.lex=!0,{startState:function(e){var t={tokenize:g,lastType:"sof",cc:[],lexical:new v((e||0)-a,0,"block",!1),localVars:r.localVars,context:r.localVars&&new M(null,null,!1),indented:e||0};return r.globalVars&&"object"==typeof r.globalVars&&(t.globalVars=r.globalVars),t},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),k(e,t)),t.tokenize!=b&&e.eatSpace())return null;var r=t.tokenize(e,t);return"comment"==n?r:(t.lastType="operator"!=n||"++"!=i&&"--"!=i?n:"incdec",function(e,t,r,n,i){var a=e.cc;for(S.state=e,S.stream=i,S.marked=null,S.cc=a,S.style=t,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;)if((a.length?a.pop():l?W:B)(r,n)){for(;a.length&&a[a.length-1].lex;)a.pop()();return S.marked?S.marked:"variable"==r&&x(e,n)?"variable-2":t}}(t,r,n,i,e))},indent:function(t,n){if(t.tokenize==b||t.tokenize==y)return e.Pass;if(t.tokenize!=g)return 0;var i,s=n&&n.charAt(0),l=t.lexical;if(!/^\s*else\b/.test(n))for(var c=t.cc.length-1;c>=0;--c){var u=t.cc[c];if(u==V)l=l.prev;else if(u!=Oe&&u!=A)break}for(;("stat"==l.type||"form"==l.type)&&("}"==s||(i=t.cc[t.cc.length-1])&&(i==U||i==H)&&!/^[,\.=+\-*:?[\(]/.test(n));)l=l.prev;o&&")"==l.type&&"stat"==l.prev.type&&(l=l.prev);var d=l.type,p=s==d;return"vardef"==d?l.indented+("operator"==t.lastType||","==t.lastType?l.info.length+1:0):"form"==d&&"{"==s?l.indented:"form"==d?l.indented+a:"stat"==d?l.indented+(function(e,t){return"operator"==e.lastType||","==e.lastType||f.test(t.charAt(0))||/[,.]/.test(t.charAt(0))}(t,n)?o||a:0):"switch"!=l.info||p||0==r.doubleIndentSwitch?l.align?l.column+(p?0:1):l.indented+(p?0:a):l.indented+(/^(?:case|default)\b/.test(n)?a:2*a)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:l?null:"/*",blockCommentEnd:l?null:"*/",blockCommentContinue:l?null:" * ",lineComment:l?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:l?"json":"javascript",jsonldMode:s,jsonMode:l,expressionAllowed:Ge,skipExpression:function(e){var t=e.cc[e.cc.length-1];t!=W&&t!=D||e.cc.pop()}}})),e.registerHelper("wordChars","javascript",/[\w$]/),e.defineMIME("text/javascript","javascript"),e.defineMIME("text/ecmascript","javascript"),e.defineMIME("application/javascript","javascript"),e.defineMIME("application/x-javascript","javascript"),e.defineMIME("application/ecmascript","javascript"),e.defineMIME("application/json",{name:"javascript",json:!0}),e.defineMIME("application/x-json",{name:"javascript",json:!0}),e.defineMIME("application/manifest+json",{name:"javascript",json:!0}),e.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),e.defineMIME("text/typescript",{name:"javascript",typescript:!0}),e.defineMIME("application/typescript",{name:"javascript",typescript:!0})}));class o{content;comments;tokenizer;textCursor;tokenLineStartInternal;tokenLineEndInternal;tokenColumnStartInternal;bufferedToken;constructor(t){this.content=t,this.comments=[],this.tokenizer=r.tokenizer(this.content,{onComment:this.comments,ecmaVersion:s,allowHashBang:!0});const i=e.StringUtilities.findLineEndingIndexes(this.content);this.textCursor=new n.TextCursor.TextCursor(i),this.tokenLineStartInternal=0,this.tokenLineEndInternal=0,this.tokenColumnStartInternal=0,0===this.comments.length&&this.nextTokenInternal()}static punctuator(e,t){return e.type!==r.tokTypes.num&&e.type!==r.tokTypes.regexp&&e.type!==r.tokTypes.string&&e.type!==r.tokTypes.name&&!e.type.keyword&&(!t||1===e.type.label.length&&-1!==t.indexOf(e.type.label))}static keyword(e,t){return Boolean(e.type.keyword)&&e.type!==r.tokTypes._true&&e.type!==r.tokTypes._false&&e.type!==r.tokTypes._null&&(!t||e.type.keyword===t)}static identifier(e,t){return e.type===r.tokTypes.name&&(!t||e.value===t)}static lineComment(e){return"Line"===e.type}static blockComment(e){return"Block"===e.type}nextTokenInternal(){if(this.comments.length){const e=this.comments.shift();return this.bufferedToken||0!==this.comments.length||(this.bufferedToken=this.tokenizer.getToken()),e}const e=this.bufferedToken;return this.bufferedToken=this.tokenizer.getToken(),e}nextToken(){const e=this.nextTokenInternal();return e&&e.type!==r.tokTypes.eof?(this.textCursor.advance(e.start),this.tokenLineStartInternal=this.textCursor.lineNumber(),this.tokenColumnStartInternal=this.textCursor.columnNumber(),this.textCursor.advance(e.end),this.tokenLineEndInternal=this.textCursor.lineNumber(),e):null}peekToken(){return this.comments.length?this.comments[0]:this.bufferedToken&&this.bufferedToken.type!==r.tokTypes.eof?this.bufferedToken:null}tokenLineStart(){return this.tokenLineStartInternal}tokenLineEnd(){return this.tokenLineEndInternal}tokenColumnStart(){return this.tokenColumnStartInternal}}const s=2022,l={};class c{beforeVisit;afterVisit;walkNulls;constructor(e,t){this.beforeVisit=e,this.afterVisit=t||function(){},this.walkNulls=!1}static get SkipSubtree(){return l}setWalkNulls(e){this.walkNulls=e}walk(e){this.innerWalk(e,null)}innerWalk(e,t){if(!e&&t&&this.walkNulls){const t={raw:"null",value:null,parent:null,type:"Literal"};e=t}if(!e)return;if(e.parent=t,this.beforeVisit.call(null,e)===c.SkipSubtree)return void this.afterVisit.call(null,e);const r=u[e.type];if(r){if("TemplateLiteral"===e.type){const t=e,r=t.expressions.length;for(let e=0;e<r;++e)this.innerWalk(t.quasis[e],t),this.innerWalk(t.expressions[e],t);this.innerWalk(t.quasis[r],t)}else for(let t=0;t<r.length;++t){const n=e[r[t]];Array.isArray(n)?this.walkArray(n,e):this.innerWalk(n,e)}this.afterVisit.call(null,e)}else console.error("Walk order not defined for "+e.type)}walkArray(e,t){for(let r=0;r<e.length;++r)this.innerWalk(e[r],t)}}const u={AwaitExpression:["argument"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],BinaryExpression:["left","right"],BlockStatement:["body"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ChainExpression:["expression"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExpressionStatement:["expression"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],ForStatement:["init","test","update","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],Identifier:[],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],ImportExpression:["source"],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["specifiers","source","declaration"],ExportSpecifier:["exported","local"],IfStatement:["test","consequent","alternate"],LabeledStatement:["label","body"],Literal:[],LogicalExpression:["left","right"],MemberExpression:["object","property"],MetaProperty:["meta","property"],MethodDefinition:["key","value"],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],ParenthesizedExpression:["expression"],PrivateIdentifier:[],PropertyDefinition:["key","value"],Program:["body"],Property:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],Super:[],SwitchCase:["test","consequent"],SwitchStatement:["discriminant","cases"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]};class d{indentString;lastOriginalPosition=0;formattedContent=[];formattedContentLength=0;lastFormattedPosition=0;nestingLevel=0;newLines=0;enforceSpaceBetweenWords=!0;softSpace=!1;hardSpaces=0;cachedIndents=new Map;mapping={original:[0],formatted:[0]};constructor(e){this.indentString=e}setEnforceSpaceBetweenWords(e){const t=this.enforceSpaceBetweenWords;return this.enforceSpaceBetweenWords=e,t}addToken(e,t){const r=this.formattedContent[this.formattedContent.length-1];this.enforceSpaceBetweenWords&&r&&/\w/.test(r[r.length-1])&&/\w/.test(e)&&this.addSoftSpace(),this.appendFormatting(),this.addMappingIfNeeded(t),this.addText(e)}addSoftSpace(){this.hardSpaces||(this.softSpace=!0)}addHardSpace(){this.softSpace=!1,++this.hardSpaces}addNewLine(e){this.formattedContentLength&&(e?++this.newLines:this.newLines=this.newLines||1)}increaseNestingLevel(){this.nestingLevel+=1}decreaseNestingLevel(){this.nestingLevel>0&&(this.nestingLevel-=1)}content(){return this.formattedContent.join("")+(this.newLines?"\n":"")}appendFormatting(){if(this.newLines){for(let e=0;e<this.newLines;++e)this.addText("\n");this.addText(this.indent())}else this.softSpace&&this.addText(" ");if(this.hardSpaces)for(let e=0;e<this.hardSpaces;++e)this.addText(" ");this.newLines=0,this.softSpace=!1,this.hardSpaces=0}indent(){const e=this.cachedIndents.get(this.nestingLevel);if(e)return e;let t="";for(let e=0;e<this.nestingLevel;++e)t+=this.indentString;return this.nestingLevel<=20&&this.cachedIndents.set(this.nestingLevel,t),t}addText(e){this.formattedContent.push(e),this.formattedContentLength+=e.length}addMappingIfNeeded(e){e-this.lastOriginalPosition!=this.formattedContentLength-this.lastFormattedPosition&&(this.mapping.original.push(e),this.lastOriginalPosition=e,this.mapping.formatted.push(this.formattedContentLength),this.lastFormattedPosition=this.formattedContentLength)}}var p=Object.freeze({__proto__:null,FormattedContentBuilder:d});class f{builder;tokenizer;content;fromOffset;lastLineNumber;toOffset;constructor(e){this.builder=e}format(e,t,n,i){this.fromOffset=n,this.toOffset=i,this.content=e.substring(this.fromOffset,this.toOffset),this.lastLineNumber=0,this.tokenizer=new o(this.content);const a=r.parse(this.content,{ranges:!1,preserveParens:!0,allowImportExportEverywhere:!0,ecmaVersion:s,allowHashBang:!0});new c(this.beforeVisit.bind(this),this.afterVisit.bind(this)).walk(a)}push(e,t){for(let r=0;r<t.length;++r)"s"===t[r]?this.builder.addSoftSpace():"S"===t[r]?this.builder.addHardSpace():"n"===t[r]?this.builder.addNewLine():">"===t[r]?this.builder.increaseNestingLevel():"<"===t[r]?this.builder.decreaseNestingLevel():"t"===t[r]&&(this.tokenizer.tokenLineStart()-this.lastLineNumber>1&&this.builder.addNewLine(!0),this.lastLineNumber=this.tokenizer.tokenLineEnd(),e&&this.builder.addToken(this.content.substring(e.start,e.end),this.fromOffset+e.start))}beforeVisit(e){if(!e.parent)return;let t;for(;(t=this.tokenizer.peekToken())&&t.start<e.start;){const t=this.tokenizer.nextToken(),r=this.formatToken(e.parent,t);this.push(t,r)}}afterVisit(e){let t;for(;(t=this.tokenizer.peekToken())&&t.start<e.end;){const t=this.tokenizer.nextToken(),r=this.formatToken(e,t);this.push(t,r)}this.push(null,this.finishNode(e))}inForLoopHeader(e){const t=e.parent;if(!t)return!1;if("ForStatement"===t.type){const r=t;return e===r.init||e===r.test||e===r.update}if("ForInStatement"===t.type||"ForOfStatement"===t.type){const r=t;return e===r.left||e===r.right}return!1}formatToken(e,t){const r=o;if(r.lineComment(t))return"tn";if(r.blockComment(t))return"tn";const n=t;if("ContinueStatement"===e.type||"BreakStatement"===e.type)return e.label&&r.keyword(n)?"ts":"t";if("Identifier"===e.type)return"t";if("PrivateIdentifier"===e.type)return"t";if("ReturnStatement"===e.type)return r.punctuator(n,";")?"t":e.argument?"ts":"t";if("AwaitExpression"===e.type)return r.punctuator(n,";")?"t":e.argument?"ts":"t";if("Property"===e.type)return r.punctuator(n,":")?"ts":"t";if("ArrayExpression"===e.type)return r.punctuator(n,",")?"ts":"t";if("LabeledStatement"===e.type){if(r.punctuator(n,":"))return"ts"}else if("LogicalExpression"===e.type||"AssignmentExpression"===e.type||"BinaryExpression"===e.type){if(r.punctuator(n)&&!r.punctuator(n,"()"))return"sts"}else if("ConditionalExpression"===e.type){if(r.punctuator(n,"?:"))return"sts"}else if("VariableDeclarator"===e.type){if(r.punctuator(n,"="))return"sts"}else if("ObjectPattern"===e.type){if(e.parent&&"VariableDeclarator"===e.parent.type&&r.punctuator(n,"{"))return"st";if(r.punctuator(n,","))return"ts"}else if("FunctionDeclaration"===e.type){if(r.punctuator(n,",)"))return"ts"}else if("FunctionExpression"===e.type){if(r.punctuator(n,",)"))return"ts";if(r.keyword(n,"function"))return e.id?"ts":"t"}else if("WithStatement"===e.type){if(r.punctuator(n,")"))return e.body&&"BlockStatement"===e.body.type?"ts":"tn>"}else if("SwitchStatement"===e.type){if(r.punctuator(n,"{"))return"tn>";if(r.punctuator(n,"}"))return"n<tn";if(r.punctuator(n,")"))return"ts"}else if("SwitchCase"===e.type){if(r.keyword(n,"case"))return"n<ts";if(r.keyword(n,"default"))return"n<t";if(r.punctuator(n,":"))return"tn>"}else if("VariableDeclaration"===e.type){if(r.punctuator(n,",")){let t=!0;const r=e.declarations;for(let e=0;e<r.length;++e)t=t&&Boolean(r[e].init);return!this.inForLoopHeader(e)&&t?"nSSts":"ts"}}else if("PropertyDefinition"===e.type){if(r.punctuator(n,"="))return"sts";if(r.punctuator(n,";"))return"tn"}else if("BlockStatement"===e.type){if(r.punctuator(n,"{"))return e.body.length?"tn>":"t";if(r.punctuator(n,"}"))return e.body.length?"n<t":"t"}else if("CatchClause"===e.type){if(r.punctuator(n,")"))return"ts"}else if("ObjectExpression"===e.type){if(!e.properties.length)return"t";if(r.punctuator(n,"{"))return"tn>";if(r.punctuator(n,"}"))return"n<t";if(r.punctuator(n,","))return"tn"}else if("IfStatement"===e.type){if(r.punctuator(n,")"))return e.consequent&&"BlockStatement"===e.consequent.type?"ts":"tn>";if(r.keyword(n,"else")){const t=e.consequent&&"BlockStatement"===e.consequent.type?"st":"n<t";let r="n>";return!e.alternate||"BlockStatement"!==e.alternate.type&&"IfStatement"!==e.alternate.type||(r="s"),t+r}}else if("CallExpression"===e.type){if(r.punctuator(n,","))return"ts"}else{if("SequenceExpression"===e.type&&r.punctuator(n,","))return e.parent&&"SwitchCase"===e.parent.type?"ts":"tn";if("ForStatement"===e.type||"ForOfStatement"===e.type||"ForInStatement"===e.type){if(r.punctuator(n,";"))return"ts";if(r.keyword(n,"in")||r.identifier(n,"of"))return"sts";if(r.punctuator(n,")"))return e.body&&"BlockStatement"===e.body.type?"ts":"tn>"}else if("WhileStatement"===e.type){if(r.punctuator(n,")"))return e.body&&"BlockStatement"===e.body.type?"ts":"tn>"}else if("DoWhileStatement"===e.type){const t=e.body&&"BlockStatement"===e.body.type;if(r.keyword(n,"do"))return t?"ts":"tn>";if(r.keyword(n,"while"))return t?"sts":"n<ts";if(r.punctuator(n,";"))return"tn"}else{if("ClassBody"===e.type)return r.punctuator(n,"{")?"stn>":r.punctuator(n,"}")?"<ntn":"t";if("YieldExpression"===e.type)return"t";if("Super"===e.type)return"t";if("ImportExpression"===e.type)return"t";if("ExportAllDeclaration"===e.type)return r.punctuator(n,"*")?"sts":"t";if("ExportNamedDeclaration"===e.type||"ImportDeclaration"===e.type)return r.punctuator(n,"{")?"st":r.punctuator(n,",")?"ts":r.punctuator(n,"}")?e.source?"ts":"t":r.punctuator(n,"*")?"sts":"t"}}return r.keyword(n)&&!r.keyword(n,"this")?"ts":"t"}finishNode(e){if("WithStatement"===e.type){if(e.body&&"BlockStatement"!==e.body.type)return"n<"}else if("VariableDeclaration"===e.type){if(!this.inForLoopHeader(e))return"n"}else if("ForStatement"===e.type||"ForOfStatement"===e.type||"ForInStatement"===e.type){if(e.body&&"BlockStatement"!==e.body.type)return"n<"}else{if("BlockStatement"===e.type){if(e.parent&&"IfStatement"===e.parent.type){const t=e.parent;if(t.alternate&&t.consequent===e)return""}if(e.parent&&"FunctionExpression"===e.parent.type&&e.parent.parent&&"Property"===e.parent.parent.type)return"";if(e.parent&&"FunctionExpression"===e.parent.type&&e.parent.parent&&"VariableDeclarator"===e.parent.parent.type)return"";if(e.parent&&"FunctionExpression"===e.parent.type&&e.parent.parent&&"CallExpression"===e.parent.parent.type)return"";if(e.parent&&"DoWhileStatement"===e.parent.type)return"";if(e.parent&&"TryStatement"===e.parent.type){if(e.parent.block===e)return"s"}if(e.parent&&"CatchClause"===e.parent.type){const t=e.parent;if(t.parent&&t.parent.finalizer)return"s"}return"n"}if("WhileStatement"===e.type){if(e.body&&"BlockStatement"!==e.body.type)return"n<"}else if("IfStatement"===e.type){if(e.alternate){if("BlockStatement"!==e.alternate.type&&"IfStatement"!==e.alternate.type)return"<"}else if(e.consequent&&"BlockStatement"!==e.consequent.type)return"<"}else{if("BreakStatement"===e.type||"ContinueStatement"===e.type||"ThrowStatement"===e.type||"ReturnStatement"===e.type||"ExpressionStatement"===e.type)return"n";if("ImportDeclaration"===e.type||"ExportAllDeclaration"===e.type||"ExportDefaultDeclaration"===e.type||"ExportNamedDeclaration"===e.type)return"n"}}return""}}var m=Object.freeze({__proto__:null,JavaScriptFormatter:f});class h{builder;jsFormatter;cssFormatter;text;lineEndings;model;constructor(e){this.builder=e,this.jsFormatter=new f(e),this.cssFormatter=new M(e)}format(e,t){this.text=e,this.lineEndings=t,this.model=new b(e),this.walk(this.model.document())}formatTokensTill(e,t){if(!this.model)return;let r=this.model.peekToken();for(;r&&r.startOffset<t;){const t=this.model.nextToken();this.formatToken(e,t),r=this.model.peekToken()}}walk(e){if(!e.openTag||!e.closeTag)throw new Error("Element is missing open or close tag");e.parent&&this.formatTokensTill(e.parent,e.openTag.startOffset),this.beforeOpenTag(e),this.formatTokensTill(e,e.openTag.endOffset),this.afterOpenTag(e);for(let t=0;t<e.children.length;++t)this.walk(e.children[t]);this.formatTokensTill(e,e.closeTag.startOffset),this.beforeCloseTag(e),this.formatTokensTill(e,e.closeTag.endOffset),this.afterCloseTag(e)}beforeOpenTag(e){this.model&&e.children.length&&e!==this.model.document()&&this.builder.addNewLine()}afterOpenTag(e){this.model&&e.children.length&&e!==this.model.document()&&(this.builder.increaseNestingLevel(),this.builder.addNewLine())}beforeCloseTag(e){this.model&&e.children.length&&e!==this.model.document()&&(this.builder.decreaseNestingLevel(),this.builder.addNewLine())}afterCloseTag(e){this.builder.addNewLine()}formatToken(t,r){if(e.StringUtilities.isWhitespace(r.value))return;if(g(r.type,"comment")||g(r.type,"meta"))return this.builder.addNewLine(),this.builder.addToken(r.value.trim(),r.startOffset),void this.builder.addNewLine();if(!t.openTag||!t.closeTag)return;const n=t.openTag.endOffset<=r.startOffset&&r.startOffset<t.closeTag.startOffset;return n&&"style"===t.name?(this.builder.addNewLine(),this.builder.increaseNestingLevel(),this.cssFormatter.format(this.text||"",this.lineEndings||[],r.startOffset,r.endOffset),void this.builder.decreaseNestingLevel()):n&&"script"===t.name?(this.builder.addNewLine(),this.builder.increaseNestingLevel(),this.scriptTagIsJavaScript(t)?this.jsFormatter.format(this.text||"",this.lineEndings||[],r.startOffset,r.endOffset):(this.builder.addToken(r.value,r.startOffset),this.builder.addNewLine()),void this.builder.decreaseNestingLevel()):(!n&&g(r.type,"attribute")&&this.builder.addSoftSpace(),void this.builder.addToken(r.value,r.startOffset))}scriptTagIsJavaScript(e){if(!e.openTag)return!0;if(!e.openTag.attributes.has("type"))return!0;let t=e.openTag.attributes.get("type");if(!t)return!0;t=t.toLowerCase();const r=/^(["\'])(.*)\1$/.exec(t.trim());return r&&(t=r[2]),h.SupportedJavaScriptMimeTypes.has(t.trim())}static SupportedJavaScriptMimeTypes=new Set(["application/ecmascript","application/javascript","application/x-ecmascript","application/x-javascript","text/ecmascript","text/javascript","text/javascript1.0","text/javascript1.1","text/javascript1.2","text/javascript1.3","text/javascript1.4","text/javascript1.5","text/jscript","text/livescript","text/x-ecmascript","text/x-javascript"])}function g(e,t){return e.has(t)||e.has(`xml-${t}`)}class b{state;documentInternal;stack;tokens;tokenIndex;attributes;attributeName;tagName;isOpenTag;tagStartOffset;tagEndOffset;constructor(e){this.state="Initial",this.documentInternal=new x("document"),this.documentInternal.openTag=new v("document",0,0,new Map,!0,!1),this.documentInternal.closeTag=new v("document",e.length,e.length,new Map,!1,!1),this.stack=[this.documentInternal],this.tokens=[],this.tokenIndex=0,this.build(e),this.attributes=new Map,this.attributeName="",this.tagName="",this.isOpenTag=!1}build(e){const t=O("text/html");let r=0;const n=e.toLowerCase();for(;t(e.substring(r),i.bind(this,r)),!(r>=e.length);){const t=this.stack[this.stack.length-1];if(!t)break;if(r=n.indexOf("</"+t.name,r),-1===r&&(r=e.length),!t.openTag)break;const i=t.openTag.endOffset,a=r,o=e.substring(i,a);this.tokens.push(new w(o,new Set,i,a))}for(;this.stack.length>1;){const t=this.stack[this.stack.length-1];if(!t)break;this.popElement(new v(t.name,e.length,e.length,new Map,!1,!1))}function i(e,t,n,i,a){i+=e,r=a+=e;const o=n?new Set(n.split(" ")):new Set,s=new w(t,o,i,a);this.tokens.push(s),this.updateDOM(s);const l=this.stack[this.stack.length-1];if(l&&("script"===l.name||"style"===l.name)&&l.openTag&&l.openTag.endOffset===r)return L}}updateDOM(e){const t=e.value,r=e.type;switch(this.state){case"Initial":return void(!g(r,"bracket")||"<"!==t&&"</"!==t||(this.onStartTag(e),this.state="Tag"));case"Tag":return void(g(r,"tag")&&!g(r,"bracket")?this.tagName=t.trim().toLowerCase():g(r,"attribute")?(this.attributeName=t.trim().toLowerCase(),this.attributes.set(this.attributeName,""),this.state="AttributeName"):!g(r,"bracket")||">"!==t&&"/>"!==t||(this.onEndTag(e),this.state="Initial"));case"AttributeName":return void(r.size||"="!==t?!g(r,"bracket")||">"!==t&&"/>"!==t||(this.onEndTag(e),this.state="Initial"):this.state="AttributeValue");case"AttributeValue":return void(g(r,"string")?(this.attributes.set(this.attributeName,t),this.state="Tag"):!g(r,"bracket")||">"!==t&&"/>"!==t||(this.onEndTag(e),this.state="Initial"))}}onStartTag(e){this.tagName="",this.tagStartOffset=e.startOffset,this.tagEndOffset=null,this.attributes=new Map,this.attributeName="",this.isOpenTag="<"===e.value}onEndTag(e){this.tagEndOffset=e.endOffset;const t="/>"===e.value||y.has(this.tagName),r=new v(this.tagName,this.tagStartOffset||0,this.tagEndOffset,this.attributes,this.isOpenTag,t);this.onTagComplete(r)}onTagComplete(e){if(e.isOpenTag){const t=this.stack[this.stack.length-1];if(t){const n=k.get(t.name);t!==this.documentInternal&&t.openTag&&t.openTag.selfClosingTag?this.popElement(r(t,t.openTag.endOffset)):n&&n.has(e.name)&&this.popElement(r(t,e.startOffset)),this.pushElement(e)}return}let t=this.stack[this.stack.length-1];for(;this.stack.length>1&&t&&t.name!==e.name;)this.popElement(r(t,e.startOffset)),t=this.stack[this.stack.length-1];function r(e,t){return new v(e.name,t,t,new Map,!1,!1)}1!==this.stack.length&&this.popElement(e)}popElement(e){const t=this.stack.pop();t&&(t.closeTag=e)}pushElement(e){const t=this.stack[this.stack.length-1],r=new x(e.name);t&&(r.parent=t,t.children.push(r)),r.openTag=e,this.stack.push(r)}peekToken(){return this.tokenIndex<this.tokens.length?this.tokens[this.tokenIndex]:null}nextToken(){return this.tokens[this.tokenIndex++]}document(){return this.documentInternal}}const y=new Set(["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"]),k=new Map([["head",new Set(["body"])],["li",new Set(["li"])],["dt",new Set(["dt","dd"])],["dd",new Set(["dt","dd"])],["p",new Set(["address","article","aside","blockquote","div","dl","fieldset","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","main","nav","ol","p","pre","section","table","ul"])],["rb",new Set(["rb","rt","rtc","rp"])],["rt",new Set(["rb","rt","rtc","rp"])],["rtc",new Set(["rb","rtc","rp"])],["rp",new Set(["rb","rt","rtc","rp"])],["optgroup",new Set(["optgroup"])],["option",new Set(["option","optgroup"])],["colgroup",new Set(["colgroup"])],["thead",new Set(["tbody","tfoot"])],["tbody",new Set(["tbody","tfoot"])],["tfoot",new Set(["tbody"])],["tr",new Set(["tr"])],["td",new Set(["td","th"])],["th",new Set(["td","th"])]]);class w{value;type;startOffset;endOffset;constructor(e,t,r,n){this.value=e,this.type=t,this.startOffset=r,this.endOffset=n}}class v{name;startOffset;endOffset;attributes;isOpenTag;selfClosingTag;constructor(e,t,r,n,i,a){this.name=e,this.startOffset=t,this.endOffset=r,this.attributes=n,this.isOpenTag=i,this.selfClosingTag=a}}class x{name;children=[];parent=null;openTag=null;closeTag=null;constructor(e){this.name=e}}var S=Object.freeze({__proto__:null,HTMLFormatter:h,HTMLModel:b});class T{builder;constructor(e){this.builder=e}format(e,t,r,n){const i=e.substring(r,n);this.builder.addToken(i,r)}}class C{builder;toOffset;fromOffset;lineEndings;lastLine;text;constructor(e){this.builder=e,this.lastLine=-1}format(e,t,r,n){this.lineEndings=t,this.fromOffset=r,this.toOffset=n,this.lastLine=-1,this.text=e;O("application/json")(e.substring(this.fromOffset,this.toOffset),this.tokenCallback.bind(this))}tokenCallback(e,t,r){switch(e.charAt(0)){case"{":case"[":"}"===this.text[r+1]||"]"===this.text[r+1]?this.builder.addToken(e,r):(this.builder.addToken(e,r),this.builder.addNewLine(),this.builder.increaseNestingLevel());break;case"}":case"]":"{"===this.text[r-1]||"["===this.text[r-1]||(this.builder.decreaseNestingLevel(),this.builder.addNewLine()),this.builder.addToken(e,r);break;case":":this.builder.addToken(e,r),this.builder.addSoftSpace();break;case",":this.builder.addToken(e,r),this.builder.addNewLine();break;case"":case" ":case"\n":break;default:this.builder.addToken(e,r)}}}var E=Object.freeze({__proto__:null,JSONFormatter:C});function O(e){const t=CodeMirror.getMode({indentUnit:2},e),r=CodeMirror.startState(t);if(!t||"null"===t.name)throw new Error(`Could not find CodeMirror mode for MimeType: ${e}`);if(!t.token)throw new Error(`Could not find CodeMirror mode with token method: ${e}`);return(e,n)=>{const i=new CodeMirror.StringStream(e);for(;!i.eol();){const e=t.token(i,r),a=i.current();if(n(a,e,i.start,i.start+a.length)===L)return;i.start=i.pos}}}const L={};t.Runtime.Runtime.queryParam("test")&&(console.error=()=>{});var z=Object.freeze({__proto__:null,createTokenizer:O,AbortTokenization:L,evaluatableJavaScriptSubstring:function(e){const t=r.tokenizer(e,{ecmaVersion:s});let n="";try{let i=t.getToken();for(;i.type!==r.tokTypes.eof&&o.punctuator(i);)i=t.getToken();const a=i.start;let s=i.end,l=0;for(;i.type!==r.tokTypes.eof;){const e=o.identifier(i),n=o.keyword(i,"this"),a=i.type===r.tokTypes.string;if(!n&&!e&&!a)break;for(s=i.end,i=t.getToken();o.punctuator(i,".[]");)o.punctuator(i,"[")&&l++,o.punctuator(i,"]")&&(s=l>0?i.end:s,l--),i=t.getToken()}n=e.substring(a,s)}catch(e){console.error(e)}return n},javaScriptIdentifiers:function(e){let t=null;try{t=r.parse(e,{ecmaVersion:s,ranges:!1})}catch(e){}const n=[],i=new c((function(e){if(a(e))return e.id&&n.push(e.id),c.SkipSubtree;if("Identifier"!==e.type)return;if(e.parent&&"MemberExpression"===e.parent.type){const t=e.parent;if(t.property===e&&!t.computed)return}return void n.push(e)}));function a(e){return"FunctionDeclaration"===e.type||"FunctionExpression"===e.type||"ArrowFunctionExpression"===e.type}if(!t||"Program"!==t.type||1!==t.body.length||!a(t.body[0]))return[];const o=t.body[0];for(const e of o.params)i.walk(e);return i.walk(o.body),n.map((e=>({name:"name"in e&&e.name||void 0,offset:e.start})))},format:function(t,r,n){let i;const a=new d(n=n||"    "),o=e.StringUtilities.findLineEndingIndexes(r);try{switch(t){case"text/html":new h(a).format(r,o);break;case"text/x-scss":case"text/css":new M(a).format(r,o,0,r.length);break;case"text/javascript":case"application/javascript":new f(a).format(r,o,0,r.length);break;case"application/json":new C(a).format(r,o,0,r.length);break;default:new T(a).format(r,o,0,r.length)}i={mapping:a.mapping,content:a.content()}}catch(e){console.error(e),i={mapping:{original:[0],formatted:[0]},content:r}}return i},argumentsList:function(e){if(e.length>1e4)return[];let t=null;try{t=r.parse(`(${e})`,{ecmaVersion:s})}catch(e){}if(!t)try{t=r.parse(`({${e}})`,{ecmaVersion:s})}catch(e){}if(!(t&&"body"in t&&Array.isArray(t.body)&&t.body[0]&&"expression"in t.body[0]))return[];const n=t.body[0].expression;let i=null;switch(n.type){case"ClassExpression":{if(!n.body.body)break;const e=n.body.body.find((e=>"MethodDefinition"===e.type&&"constructor"===e.kind));e&&(i=e.value.params);break}case"ObjectExpression":if(!n.properties[0]||!("value"in n.properties[0])||!("params"in n.properties[0].value))break;i=n.properties[0].value.params;break;case"FunctionExpression":case"ArrowFunctionExpression":i=n.params}return i?i.map((function e(t){switch(t.type){case"Identifier":return t.name;case"AssignmentPattern":return"?"+e(t.left);case"ObjectPattern":return"obj";case"ArrayPattern":return"arr";case"RestElement":return"..."+e(t.argument)}return"?"})):[]}});class M{builder;toOffset;fromOffset;lineEndings;lastLine;state;constructor(e){this.builder=e,this.lastLine=-1,this.state={eatWhitespace:void 0,seenProperty:void 0,inPropertyValue:void 0,afterClosingBrace:void 0}}format(e,t,r,n){this.lineEndings=t,this.fromOffset=r,this.toOffset=n,this.state={eatWhitespace:void 0,seenProperty:void 0,inPropertyValue:void 0,afterClosingBrace:void 0},this.lastLine=-1;const i=O("text/css"),a=this.builder.setEnforceSpaceBetweenWords(!1);i(e.substring(this.fromOffset,this.toOffset),this.tokenCallback.bind(this)),this.builder.setEnforceSpaceBetweenWords(a)}tokenCallback(t,r,n){n+=this.fromOffset;const i=e.ArrayUtilities.lowerBound(this.lineEndings,n,e.ArrayUtilities.DEFAULT_COMPARATOR);i!==this.lastLine&&(this.state.eatWhitespace=!0),r&&(/^property/.test(r)||/^variable-2/.test(r))&&!this.state.inPropertyValue&&(this.state.seenProperty=!0),this.lastLine=i;if(/^(?:\r?\n|[\t\f\r ])+$/.test(t))this.state.eatWhitespace||this.builder.addSoftSpace();else if(this.state.eatWhitespace=!1,"\n"!==t){if("}"!==t&&(this.state.afterClosingBrace&&this.builder.addNewLine(!0),this.state.afterClosingBrace=!1),"}"===t)this.state.inPropertyValue&&this.builder.addNewLine(),this.builder.decreaseNestingLevel(),this.state.afterClosingBrace=!0,this.state.inPropertyValue=!1;else{if(":"===t&&!this.state.inPropertyValue&&this.state.seenProperty)return this.builder.addToken(t,n),this.builder.addSoftSpace(),this.state.eatWhitespace=!0,this.state.inPropertyValue=!0,void(this.state.seenProperty=!1);if("{"===t)return this.builder.addSoftSpace(),this.builder.addToken(t,n),this.builder.addNewLine(),void this.builder.increaseNestingLevel()}this.builder.addToken(t.replace(/(?:\r?\n|[\t\f\r ])+$/g,""),n),"comment"!==r||this.state.inPropertyValue||this.state.seenProperty||this.builder.addNewLine(),";"===t&&this.state.inPropertyValue?(this.state.inPropertyValue=!1,this.builder.addNewLine()):"}"===t&&this.builder.addNewLine()}}}var I=Object.freeze({__proto__:null,CSSFormatter:M});const N={Initial:"Initial",Selector:"Selector",Style:"Style",PropertyName:"PropertyName",PropertyValue:"PropertyValue",AtRule:"AtRule"};var j=Object.freeze({__proto__:null,CSSParserStates:N,parseCSS:function e(t,r){const n=t.split("\n");let i,a,o=[],s=0,l=N.Initial;const c=new Set;let u=[];function d(e){u=u.concat(e.chunk)}function p(e){return e.replace(/^(?:\r?\n|[\t\f\r ])+|(?:\r?\n|[\t\f\r ])+$/g,"")}function f(t,n,f,m){const b=n?new Set(n.split(" ")):c;switch(l){case N.Initial:b.has("qualifier")||b.has("builtin")||b.has("tag")?(i={selectorText:t,lineNumber:h,columnNumber:f,properties:[]},l=N.Selector):b.has("def")&&(i={atRule:t,lineNumber:h,columnNumber:f},l=N.AtRule);break;case N.Selector:"{"===t&&b===c?(i.selectorText=p(i.selectorText),i.styleRange=g(h,m),l=N.Style):i.selectorText+=t;break;case N.AtRule:";"!==t&&"{"!==t||b!==c?i.atRule+=t:(i.atRule=p(i.atRule),o.push(i),l=N.Initial);break;case N.Style:if(b.has("meta")||b.has("property"))a={name:t,value:"",range:g(h,f),nameRange:g(h,f)},l=N.PropertyName;else if("}"===t&&b===c)i.styleRange.endLine=h,i.styleRange.endColumn=f,o.push(i),l=N.Initial;else if(b.has("comment")){if("/*"!==t.substring(0,2)||"*/"!==t.substring(t.length-2))break;const r=t.substring(2,t.length-2);if(u=[],e("a{\n"+r+"}",d),1===u.length&&1===u[0].properties.length){const e=u[0].properties[0];e.disabled=!0,e.range=g(h,f),e.range.endColumn=m;const t=h-1,r=f+2;e.nameRange.startLine+=t,e.nameRange.startColumn+=r,e.nameRange.endLine+=t,e.nameRange.endColumn+=r,e.valueRange.startLine+=t,e.valueRange.startColumn+=r,e.valueRange.endLine+=t,e.valueRange.endColumn+=r,i.properties.push(e)}}break;case N.PropertyName:":"===t&&b===c?(a.name=a.name,a.nameRange.endLine=h,a.nameRange.endColumn=f,a.valueRange=g(h,m),l=N.PropertyValue):b.has("property")&&(a.name+=t);break;case N.PropertyValue:";"!==t&&"}"!==t||b!==c?b.has("comment")||(a.value+=t):(a.value=a.value,a.valueRange.endLine=h,a.valueRange.endColumn=f,a.range.endLine=h,a.range.endColumn=";"===t?m:f,i.properties.push(a),"}"===t?(i.styleRange.endLine=h,i.styleRange.endColumn=f,o.push(i),l=N.Initial):l=N.Style);break;default:console.assert(!1,"Unknown CSS parser state.")}s+=m-f,s>1e5&&(r({chunk:o,isLastChunk:!1}),o=[],s=0)}const m=O("text/css");let h;for(h=0;h<n.length;++h){const e=n[h];m(e,f),f("\n",null,e.length,e.length+1)}function g(e,t){return{startLine:e,startColumn:t,endLine:e,endColumn:t}}r({chunk:o,isLastChunk:!0})}});function P(t,a){let o,l=[],u=0;try{o=r.parse(t,{ecmaVersion:s,ranges:!1})}catch(e){o=i.AcornLoose.parse(t,{ecmaVersion:s,ranges:!1})}const d=e.StringUtilities.findLineEndingIndexes(t),p=new n.TextCursor.TextCursor(d);function f(e){const t="class "+y(e);p.advance(e.start),k(t)}function m(e,t,r){let n=y(e);const i=t;i.generator&&(n="*"+n),r&&(n=r+" "+n),i.async&&(n="async "+n),p.advance(e.start),k(n,function(e){const t=[];for(const r of e)"Identifier"===r.type?t.push(r.name):"RestElement"===r.type&&"Identifier"===r.argument.type?t.push("..."+r.argument.name):console.error("Error: unexpected function parameter type: "+r.type);return"("+t.join(", ")+")"}(i.params))}function h(e){return!!e&&("MemberExpression"===e.type?!e.computed&&"Identifier"===e.property.type:"Identifier"===e.type)}function g(e){return!!e&&("FunctionExpression"===e.type||"ArrowFunctionExpression"===e.type)}function b(e){return void 0!==e&&"ClassExpression"===e.type}function y(e){"MemberExpression"===e.type&&(e=e.property),console.assert("Identifier"===e.type,"Cannot extract identifier from unknown type: "+e.type);return e.name}function k(e,t){const r=p.lineNumber(),n=p.columnNumber();l.push({title:e,subtitle:t,line:r,column:n}),p.offset()-u>=1e5&&(a({chunk:l,isLastChunk:!1}),l=[],u=p.offset())}new c((function(e){if("ClassDeclaration"===e.type)f(e.id);else if("VariableDeclarator"===e.type&&e.init&&b(e.init))f(e.id);else if("AssignmentExpression"===e.type&&h(e.left)&&b(e.right))f(e.left);else if("Property"===e.type&&h(e.key)&&b(e.value))f(e.key);else if("FunctionDeclaration"===e.type)m(e.id,e);else if("VariableDeclarator"===e.type&&e.init&&g(e.init))m(e.id,e.init);else if("AssignmentExpression"===e.type&&h(e.left)&&g(e.right))m(e.left,e.right);else if(("MethodDefinition"===e.type||"Property"===e.type)&&h(e.key)&&g(e.value)){const t=[];"get"!==e.kind&&"set"!==e.kind||t.push(e.kind),"static"in e&&e.static&&t.push("static"),m(e.key,e.value,t.join(" "))}return})).walk(o),a({chunk:l,isLastChunk:!0})}var A=Object.freeze({__proto__:null,javaScriptOutline:P});var _=Object.freeze({__proto__:null,htmlOutline:function(t,r){const i=/<script[^>]*>/im,a=/<\/script\s*>/im,o=new n.TextCursor.TextCursor(e.StringUtilities.findLineEndingIndexes(t));for(;;){const e=i.exec(t.substring(o.offset()));if(!e)break;const n=o.offset()+e.index+e[0].length;o.advance(n);const s=o.lineNumber(),l=o.columnNumber(),c=a.exec(t.substring(o.offset()));if(!c)break;const u=o.offset()+c.index;o.advance(u+c[0].length);P(t.substring(n,u),(({chunk:e})=>{e.forEach((e=>{0===e.line&&(e.column+=l),e.line+=s})),r({chunk:e,isLastChunk:!1})}))}r({chunk:[],isLastChunk:!0})}});export{I as CSSFormatter,j as CSSRuleParser,p as FormattedContentBuilder,z as FormatterWorker,S as HTMLFormatter,_ as HTMLOutline,E as JSONFormatter,m as JavaScriptFormatter,A as JavaScriptOutline};
