import*as e from"../../core/platform/platform.js";import*as n from"../../core/protocol_client/protocol_client.js";import*as t from"../../core/root/root.js";import*as r from"../../models/bindings/bindings.js";import*as o from"../../models/workspace/workspace.js";import*as s from"../../ui/components/code_highlighter/code_highlighter.js";import*as i from"../../ui/legacy/legacy.js";function a(){return!self.testRunner||Boolean(t.Runtime.Runtime.queryParam("debugFrontend"))}function u(){a()||(console.log=(...e)=>{f(`log: ${e}`)},console.error=(...e)=>{f(`error: ${e}`)},console.info=(...e)=>{f(`info: ${e}`)},console.assert=(e,...n)=>{e||f(`ASSERTION FAILURE: ${n.join(" ")}`)})}self.Platform=self.Platform||{},self.Platform.StringUtilities=e.StringUtilities,self.Platform.MapUtilities=e.MapUtilities,self.Platform.ArrayUtilities=e.ArrayUtilities,self.onerror=(e,n,t,r,o)=>{f("TEST ENDED IN ERROR: "+o.stack),R()},self.addEventListener("unhandledrejection",(e=>{f(`PROMISE FAILURE: ${e.reason.stack}`),R()})),u();let c=[],l=e=>{c.push(String(e))};function d(e){l=e}function f(e){l(e)}let m,p=!1,g=()=>{p||(p=!0,function(){Array.prototype.forEach.call(document.documentElement.childNodes,(e=>e.remove()));const e=document.createElement("div");e.style&&(e.style.whiteSpace="pre",e.style.height="10px",e.style.overflow="hidden");document.documentElement.appendChild(e);for(let n=0;n<c.length;n++)e.appendChild(document.createTextNode(c[n])),e.appendChild(document.createElement("br"));c=[]}(),self.testRunner.notifyDone())};function T(e){g=e}function R(){g()}function h(e){if(e)for(let n=0,t=e.length;n<t;++n)f(e[n])}function y(e){!function n(){const t=e.shift();if(!t)return void R();f("\ntest: "+t.name);let r=t();r instanceof Promise||(r=Promise.resolve());r.then(n)}()}function v(e,n,t,r){t=M(t);const o=e[n];if("function"!=typeof o)throw new Error("Cannot find method to override: "+n);e[n]=function(s){let i;try{i=o.apply(this,arguments)}finally{r||(e[n]=o)}try{Array.prototype.push.call(arguments,i),t.apply(this,arguments)}catch(e){throw new Error("Exception in overriden method '"+n+"': "+e)}return i}}function w(e,n){return new Promise((function(t,r){const o=e[n];"function"==typeof o?e[n]=function(s){let i;try{i=o.apply(this,arguments)}finally{e[n]=o}try{Array.prototype.push.call(arguments,i),t.apply(this,arguments)}catch(e){r("Exception in overridden method '"+n+"': "+e),R()}return i}:r("Cannot find method to override: "+n)}))}async function S(e){const n=new Promise((e=>{m=e}));if(await self.runtime.loadModulePromise(e),Y)return n}async function P(e){let n=e;for(const[r,o]of t.Runtime.mappingForLayoutTests.entries())o===e&&(n=r);await import(`../../${n}/${n.split("/").reverse()[0]}-legacy.js`)}async function E(e){await import(`../${e}/${e}.js`)}function x(e){return i.ViewManager.ViewManager.instance().showView(e)}function A(e,n,t,r,o){return new KeyboardEvent("keydown",{key:e,bubbles:!0,cancelable:!0,ctrlKey:Boolean(n),altKey:Boolean(t),shiftKey:Boolean(r),metaKey:Boolean(o)})}function M(e,n){return function(){if(!e)return;const t=this;try{return e.apply(t,arguments)}catch(t){f("Exception while running: "+e+"\n"+(t.stack||t)),n?M(n)():R()}}}function D(e){return async function(){if(!e)return;const n=this;try{return await e.apply(n,arguments)}catch(n){f("Exception while running: "+e+"\n"+(n.stack||n)),R()}}}function L(e){function n(n){let t=0;for(;n&&n!==e;)"OL"!==n.nodeName||n.classList&&n.classList.contains("object-properties-section")||++t,n=n.parentNode;return Array(4*t+1).join(" ")}let t="",r=e,o=!1;for(;r.traverseNextNode(e);)if(r=r.traverseNextNode(e),r.nodeType===Node.TEXT_NODE)t+=r.nodeValue;else if("LI"===r.nodeName||"TR"===r.nodeName)o?o=!1:t+="\n"+n(r);else{if("STYLE"===r.nodeName){r=r.traverseNextNode(e);continue}r.classList&&r.classList.contains("object-properties-section")&&(o=!0)}return t}function I(e){return L(e).replace(/\s{3,}/g," ")}function b(e){let n="",t=e;for(;t.traverseNextNode(e);)t=t.traverseNextNode(e,"DEVTOOLS-CSS-LENGTH"===t.tagName),t.nodeType===Node.TEXT_NODE?n+=t.nodeValue:"STYLE"===t.nodeName&&(t=t.traverseNextNode(e));return n}async function k(e){const n=await O(e);return TestRunner.runtimeModel.createRemoteObject(n.result)}async function C(e,n){const t=await O(e);M(n)(t.result.value,t.exceptionDetails)}self.TestRunner=self.TestRunner||{};let N=0;async function O(e){const r=(new Error).stack.split("at "),o=t.Runtime.Runtime.queryParam("test"),s=r.reduce(((e,n)=>n.includes(o)?n:e),r[r.length-2]).trim().split("/"),i=s[s.length-1].slice(0,-1).split(":"),a=i[0],u=`test://evaluations/${N++}/`+a,c=parseInt(i[1],10);-1===(e="\n".repeat(c-1)+e).indexOf("sourceURL=")&&(e+=`//# sourceURL=${u}`);const l=await TestRunner.RuntimeAgent.invoke_evaluate({expression:e,objectGroup:"console"}),d=l[n.InspectorBackend.ProtocolError];return d?(f("Error: "+d),void R()):l}async function F(e,t){const r=await TestRunner.RuntimeAgent.invoke_evaluate({expression:e,objectGroup:"console",userGesture:t});if(!r[n.InspectorBackend.ProtocolError])return r.result.value;f("Error: "+(r.exceptionDetails&&r.exceptionDetails.text||"exception from evaluateInPageAnonymously.")),R()}function j(e){return new Promise((n=>C(e,n)))}async function K(e){const t=await TestRunner.RuntimeAgent.invoke_evaluate({expression:e,objectGroup:"console",includeCommandLineAPI:!1,awaitPromise:!0}),r=t[n.InspectorBackend.ProtocolError];if(!r&&!t.exceptionDetails)return t.result.value;let o="Error: ";r?o+=r:t.exceptionDetails&&(o+=t.exceptionDetails.text,t.exceptionDetails.exception&&(o+=" "+t.exceptionDetails.exception.description)),f(o),R()}function U(e,n){return K(e+"("+(n=n||[]).map((e=>JSON.stringify(e))).join(",")+")")}function W(e,n){F("setTimeout(unescape('"+escape(e)+"'), 1)",n)}function _(e,n){const t='internals.evaluateInInspectorOverlay("(" + '+e+' + ")()")';TestRunner.runtimeModel.executionContexts()[0].evaluate({expression:t,objectGroup:"",includeCommandLineAPI:!1,silent:!1,returnByValue:!0,generatePreview:!1},!1,!1).then((e=>{n(e.object.value)}))}function B(e,n){e||f("FAIL: "+n)}function $(e){ProtocolClient.test.deprecatedRunAfterPendingDispatches(e)}function V(e){if(!e.includes("<base")){const n=/(<!DOCTYPE.*?>)/i,t=`<base href="${Ke()}">`;e=e.match(n)?e.replace(n,"$1"+t):t+e}return F(`document.write(\`${e=e.replace(/'/g,"\\'").replace(/\n/g,"\\n")}\`);document.close();`)}function H(e){return K(`\n    (function(){\n      let script = document.createElement('script');\n      script.src = '${e}';\n      document.head.append(script);\n      return new Promise(f => script.onload = f);\n    })();\n  `)}function G(e){return K(`\n    (function(){\n      const link = document.createElement('link');\n      link.rel = 'stylesheet';\n      link.href = '${e}';\n      link.onload = onload;\n      document.head.append(link);\n      let resolve;\n      const promise = new Promise(r => resolve = r);\n      function onload() {\n        // TODO(chenwilliam): It shouldn't be necessary to force\n        // style recalc here but some tests rely on it.\n        window.getComputedStyle(document.body).color;\n        resolve();\n      }\n      return promise;\n    })();\n  `)}function q(e,n={}){return n.id=n.id||"",n.name=n.name||"",K(`\n    (function(){\n      const iframe = document.createElement('iframe');\n      iframe.src = '${e}';\n      iframe.id = '${n.id}';\n      iframe.name = '${n.name}';\n      document.body.appendChild(iframe);\n      return new Promise(f => iframe.onload = f);\n    })();\n  `)}let Y=0;async function X(e){Y++,await TestRunner.RuntimeAgent.invoke_evaluate({expression:e,objectGroup:"console"}),Y--,Y||void 0===m||m()}function z(e){f("\nRunning: "+e)}function J(){ProtocolClient.test.dumpProtocol=self.testRunner.logToStderr.bind(self.testRunner)}function Q(e,n,t){n+="\n//# sourceURL="+e;const r=TestRunner.runtimeModel.executionContexts().find((e=>e.frameId===t.id));TestRunner.RuntimeAgent.evaluate(n,"console",!1,!1,r.id)}const Z={formatAsTypeName:e=>"<"+typeof e+">",formatAsTypeNameOrNull:e=>null===e?"null":Z.formatAsTypeName(e),formatAsRecentTime(e){if("object"!=typeof e||!(e instanceof Date))return Z.formatAsTypeName(e);const n=Date.now()-e;return 0<=n&&n<18e5?"<plausible>":e},formatAsURL(e){if(!e)return e;const n=e.lastIndexOf("devtools/");return n<0?e:".../"+e.substr(n)},formatAsDescription:e=>e?'"'+e.replace(/^function [gs]et /,"function ")+'"':e};function ee(e,n,t,r){t=t||"",f((r=r||t)+"{");const o=Object.keys(e);o.sort();for(let r=0;r<o.length;++r){const s=o[r];if(!e.hasOwnProperty(s))continue;const i="    "+t+s+" : ",a=e[s];if(n&&n[s]){const e=n[s];if("skip"!==e){f(i+(0,Z[e])(a))}}else oe(a,n,"    "+t,i)}f(t+"}")}function ne(e,n,t,r){t=t||"",f((r=r||t)+"[");for(let r=0;r<e.length;++r)oe(e[r],n,t+"    ");f(t+"]")}function te(e){!function e(n,t){const r=[];if(t.nodeType===Node.TEXT_NODE)return void(t.parentElement&&"STYLE"===t.parentElement.nodeName||f(t.nodeValue));r.push("<"+t.nodeName);const o=t.attributes;for(let e=0;o&&e<o.length;++e)r.push(o[e].name+"="+o[e].value);r.push(">"),f(n+r.join(" "));for(let r=t.firstChild;r;r=r.nextSibling)e(n+"    ",r);t.shadowRoot&&e(n+"    ",t.shadowRoot),f(n+"</"+t.nodeName+">")}("",e)}function re(e){if(!e)return"";if(e.nodeType===Node.TEXT_NODE&&e.nodeValue)return e.parentElement&&"STYLE"===e.parentElement.nodeName?"":e.nodeValue;let n="";const t=e.childNodes;for(let e=0;e<t.length;++e)n+=re(t[e]);return e.shadowRoot&&(n+=re(e.shadowRoot)),n}function oe(e,n,t,r){(r=r||t)&&r.length>80?f(r+"was skipped due to prefix length limit"):null===e?f(r+"null"):e&&e.constructor&&"Array"===e.constructor.name?ne(e,n,t,r):"object"==typeof e?ee(e,n,t,r):f("string"==typeof e?r+'"'+e+'"':r+e)}function se(e,n,t){return t=t||function(){return!0},new Promise((r=>{n.addEventListener(e,(function o(s){if(!t(s.data))return;n.removeEventListener(e,o),r(s.data)}))}))}function ie(e){e=e||(e=>!0);for(const n of self.SDK.targetManager.targets())if(e(n))return Promise.resolve(n);return new Promise((n=>{const t={targetAdded:function(r){e(r)&&(self.SDK.targetManager.unobserveTargets(t),n(r))},targetRemoved:function(){}};self.SDK.targetManager.observeTargets(t)}))}function ae(e){return new Promise((n=>{const t={targetRemoved:function(r){r===e&&(self.SDK.targetManager.unobserveTargets(t),n(r))},targetAdded:function(){}};self.SDK.targetManager.observeTargets(t)}))}function ue(e){return e.executionContexts().length?Promise.resolve(e.executionContexts()[0]):e.once(SDK.RuntimeModel.Events.ExecutionContextCreated)}function ce(e){const n=e.runtimeModel;return-1===n.executionContexts().indexOf(e)?Promise.resolve():se(SDK.RuntimeModel.Events.ExecutionContextDestroyed,n,(n=>n===e))}function le(e,n,t){e<n&&f("FAILED: "+(t?t+": ":"")+e+" < "+n)}let de;function fe(e,n){de=M(n),TestRunner.resourceTreeModel.addEventListener(SDK.ResourceTreeModel.Events.Load,pe),F("window.location.replace('"+e+"')")}function me(e){return new Promise((n=>fe(e,n)))}function pe(){TestRunner.resourceTreeModel.removeEventListener(SDK.ResourceTreeModel.Events.Load,pe),we()}function ge(e){ye(!0,void 0,e)}function Te(e){ye(!1,void 0,e)}function Re(e,n){ye(!1,e,n)}function he(){return new Promise((e=>Te(e)))}function ye(e,n,t){de=M(t),TestRunner.resourceTreeModel.addEventListener(SDK.ResourceTreeModel.Events.Load,ve),TestRunner.resourceTreeModel.reloadPage(e,n)}function ve(){TestRunner.resourceTreeModel.removeEventListener(SDK.ResourceTreeModel.Events.Load,ve),f("Page reloaded."),we()}async function we(){if(await ue(TestRunner.runtimeModel),de){const e=de;de=void 0,e()}}function Se(e){TestRunner.resourceTreeModel.addEventListener(SDK.ResourceTreeModel.Events.Load,(function n(){TestRunner.resourceTreeModel.removeEventListener(SDK.ResourceTreeModel.Events.Load,n),e()}))}function Pe(e){const n=de;de=M((function(){n&&n(),e()}))}function Ee(e){const n=e.slice();!function e(){if(!n.length)return void R();const t=n.shift();f(""),f("Running: "+/function\s([^(]*)/.exec(t)[1]),M(t)(e)}()}async function xe(e){for(const n of e)f(""),f("Running: "+/function\s([^(]*)/.exec(n)[1]),await D(n)();R()}function Ae(e,n,t){if(e===n)return;let r;throw r=t?"Failure ("+t+"):":"Failure:",new Error(r+" expected <"+e+"> found <"+n+">")}function Me(e,n){Ae(!0,Boolean(e),n)}function De(e,n,t,r){t=M(t);const o=e[n];if("function"!=typeof o)throw new Error("Cannot find method to override: "+n);return e[n]=function(s){try{return t.apply(this,arguments)}catch(e){throw new Error("Exception in overriden method '"+n+"': "+e)}finally{r||(e[n]=o)}},o}function Le(e){let n=e.replace(/\(file:\/\/\/(?:[^)]+\)|[\w\/:-]+)/g,"(...)");return n=n.replace(/\(http:\/\/(?:[^)]+\)|[\w\/:-]+)/g,"(...)"),n=n.replace(/\(test:\/\/(?:[^)]+\)|[\w\/:-]+)/g,"(...)"),n=n.replace(/\(<anonymous>:[^)]+\)/g,"(...)"),n=n.replace(/VM\d+/g,"VM"),n.replace(/\s*at[^()]+\(native\)/g,"")}function Ie(){i.InspectorView.InspectorView.instance().element.setAttribute("style","display:none !important")}function be(){return TestRunner.resourceTreeModel.mainFrame}class ke{constructor(e){this.callback=e,this.buffer=""}async open(e){return!0}async write(e){this.buffer+=e}async close(){this.callback(this.buffer)}}class Ce{constructor(e){this.value=e}get(){return this.value}set(e){this.value=e}}function Ne(){return self.runtime.modules.filter((e=>e.loadedForTest)).filter((e=>"help"!==e.name())).filter((e=>-1===e.name().indexOf("test_runner")))}function Oe(n){const t=new Set(n||[]);f("Loaded modules:");const r=Ne().sort((function(n,t){return e.StringUtilities.naturalOrderComparator(n.descriptor.name,t.descriptor.name)}));for(const e of r)t.has(e)||f("    "+e.descriptor.name);return r}function Fe(e,n){function t(t){return(!n||t.project().type()===n)&&(!(!n&&t.project().type()===o.Workspace.projectTypes.Service)&&!(e&&!t.url().endsWith(e)))}for(const n of self.Workspace.workspace.uiSourceCodes())if(e&&t(n))return Promise.resolve(n);return se(o.Workspace.Events.UISourceCodeAdded,self.Workspace.workspace,t)}function je(e){self.Workspace.workspace.once(o.Workspace.Events.UISourceCodeRemoved).then(e)}function Ke(e=""){const n=t.Runtime.Runtime.queryParam("test");return new URL(e,n+"/../").href}function Ue(e,n){const t=document.createElement("span");return t.textContent=e,s.CodeHighlighter.highlightNode(t,n).then((function(){const n=[];for(let e=0;e<t.childNodes.length;e++)t.childNodes[e].getAttribute?n.push(t.childNodes[e].getAttribute("class")):n.push("*");f(e+": "+n.join(", "))}))}const We=function(e){const n=function(e,n){const t=[];let r=e.indexOf(n);for(;-1!==r;)t.push(r),r=e.indexOf(n,r+n.length);return t}(e,"\n");return n.push(e.length),n};async function _e(e){f(await K(`document.querySelector('${e}').innerText`))}async function Be(){await r.DebuggerWorkspaceBinding.DebuggerWorkspaceBinding.instance().pendingLiveLocationChangesPromise(),await r.CSSWorkspaceBinding.CSSWorkspaceBinding.instance().pendingLiveLocationChangesPromise()}self.testRunner,TestRunner.StringOutputStream=ke,TestRunner.MockSetting=Ce,TestRunner.formatters=Z,TestRunner.completeTest=R,TestRunner.addResult=f,TestRunner.addResults=h,TestRunner.runTests=y,TestRunner.addSniffer=v,TestRunner.addSnifferPromise=w,TestRunner.showPanel=x,TestRunner.createKeyEvent=A,TestRunner.safeWrap=M,TestRunner.textContentWithLineBreaks=L,TestRunner.textContentWithLineBreaksTrimmed=I,TestRunner.textContentWithoutStyles=b,TestRunner.evaluateInPagePromise=j,TestRunner.callFunctionInPageAsync=U,TestRunner.evaluateInPageWithTimeout=W,TestRunner.evaluateFunctionInOverlay=_,TestRunner.check=B,TestRunner.deprecatedRunAfterPendingDispatches=$,TestRunner.loadHTML=V,TestRunner.addScriptTag=H,TestRunner.addStylesheetTag=G,TestRunner.addIframe=q,TestRunner.markStep=z,TestRunner.startDumpingProtocolMessages=J,TestRunner.addScriptForFrame=Q,TestRunner.addObject=ee,TestRunner.addArray=ne,TestRunner.dumpDeepInnerHTML=te,TestRunner.deepTextContent=re,TestRunner.dump=oe,TestRunner.waitForEvent=se,TestRunner.waitForTarget=ie,TestRunner.waitForTargetRemoved=ae,TestRunner.waitForExecutionContext=ue,TestRunner.waitForExecutionContextDestroyed=ce,TestRunner.assertGreaterOrEqual=le,TestRunner.navigate=fe,TestRunner.navigatePromise=me,TestRunner.hardReloadPage=ge,TestRunner.reloadPage=Te,TestRunner.reloadPageWithInjectedScript=Re,TestRunner.reloadPagePromise=he,TestRunner.pageLoaded=ve,TestRunner.waitForPageLoad=Se,TestRunner.runWhenPageLoads=Pe,TestRunner.runTestSuite=Ee,TestRunner.assertEquals=Ae,TestRunner.assertTrue=Me,TestRunner.override=De,TestRunner.clearSpecificInfoFromStackFrames=Le,TestRunner.hideInspectorView=Ie,TestRunner.mainFrame=be,TestRunner.loadedModules=Ne,TestRunner.dumpLoadedModules=Oe,TestRunner.waitForUISourceCode=Fe,TestRunner.waitForUISourceCodeRemoved=je,TestRunner.url=Ke,TestRunner.dumpSyntaxHighlight=Ue,TestRunner.loadModule=S,TestRunner.loadLegacyModule=P,TestRunner.loadTestModule=E,TestRunner.evaluateInPageRemoteObject=k,TestRunner.evaluateInPage=C,TestRunner.evaluateInPageAnonymously=F,TestRunner.evaluateInPageAsync=K,TestRunner.deprecatedInitAsync=X,TestRunner.runAsyncTestSuite=xe,TestRunner.dumpInspectedPageElementText=_e,TestRunner.waitForPendingLiveLocationUpdates=Be,TestRunner.findLineEndingIndexes=We,TestRunner.isScrolledToBottom=i.UIUtils.isScrolledToBottom;var $e=Object.freeze({__proto__:null,isDebugTest:a,_printDevToolsConsole:u,setInnerResult:d,addResult:f,setInnerCompleteTest:T,completeTest:R,addResults:h,runTests:y,addSniffer:v,addSnifferPromise:w,loadModule:S,loadLegacyModule:P,loadTestModule:E,showPanel:x,createKeyEvent:A,safeWrap:M,textContentWithLineBreaks:L,textContentWithLineBreaksTrimmed:I,textContentWithoutStyles:b,evaluateInPageRemoteObject:k,evaluateInPage:C,_evaluateInPage:O,evaluateInPageAnonymously:F,evaluateInPagePromise:j,evaluateInPageAsync:K,callFunctionInPageAsync:U,evaluateInPageWithTimeout:W,evaluateFunctionInOverlay:_,check:B,deprecatedRunAfterPendingDispatches:$,loadHTML:V,addScriptTag:H,addStylesheetTag:G,addIframe:q,deprecatedInitAsync:X,markStep:z,startDumpingProtocolMessages:J,addScriptForFrame:Q,formatters:Z,addObject:ee,addArray:ne,dumpDeepInnerHTML:te,deepTextContent:re,dump:oe,waitForEvent:se,waitForTarget:ie,waitForTargetRemoved:ae,waitForExecutionContext:ue,waitForExecutionContextDestroyed:ce,assertGreaterOrEqual:le,navigate:fe,navigatePromise:me,_pageNavigated:pe,hardReloadPage:ge,reloadPage:Te,reloadPageWithInjectedScript:Re,reloadPagePromise:he,_innerReloadPage:ye,pageLoaded:ve,_handlePageLoaded:we,waitForPageLoad:Se,runWhenPageLoads:Pe,runTestSuite:Ee,runAsyncTestSuite:xe,assertEquals:Ae,assertTrue:Me,override:De,clearSpecificInfoFromStackFrames:Le,hideInspectorView:Ie,mainFrame:be,StringOutputStream:ke,MockSetting:Ce,loadedModules:Ne,dumpLoadedModules:Oe,waitForUISourceCode:Fe,waitForUISourceCodeRemoved:je,url:Ke,dumpSyntaxHighlight:Ue,findLineEndingIndexes:We,dumpInspectedPageElementText:_e,waitForPendingLiveLocationUpdates:Be});async function Ve(){const e=Root.Runtime.queryParam("test");if(a())return d(console.log),T((()=>console.log("Test completed"))),void(self.test=async function(){await import(e)});try{await import(e)}catch(e){f("TEST ENDED EARLY DUE TO UNCAUGHT ERROR:"),f(e&&e.stack||e),f("=== DO NOT COMMIT THIS INTO -expected.txt ==="),R()}}self.Platform=self.Platform||{},self.Platform.StringUtilities=e.StringUtilities;let He=!1;class Ge{targetAdded(e){"main"===e.id()&&function(e){self.TestRunner.BrowserAgent=e.browserAgent(),self.TestRunner.CSSAgent=e.cssAgent(),self.TestRunner.DeviceOrientationAgent=e.deviceOrientationAgent(),self.TestRunner.DOMAgent=e.domAgent(),self.TestRunner.DOMDebuggerAgent=e.domdebuggerAgent(),self.TestRunner.DebuggerAgent=e.debuggerAgent(),self.TestRunner.EmulationAgent=e.emulationAgent(),self.TestRunner.HeapProfilerAgent=e.heapProfilerAgent(),self.TestRunner.InputAgent=e.inputAgent(),self.TestRunner.InspectorAgent=e.inspectorAgent(),self.TestRunner.NetworkAgent=e.networkAgent(),self.TestRunner.OverlayAgent=e.overlayAgent(),self.TestRunner.PageAgent=e.pageAgent(),self.TestRunner.ProfilerAgent=e.profilerAgent(),self.TestRunner.RuntimeAgent=e.runtimeAgent(),self.TestRunner.TargetAgent=e.targetAgent(),self.TestRunner.networkManager=e.model(SDK.NetworkManager),self.TestRunner.securityOriginManager=e.model(SDK.SecurityOriginManager),self.TestRunner.resourceTreeModel=e.model(SDK.ResourceTreeModel),self.TestRunner.debuggerModel=e.model(SDK.DebuggerModel),self.TestRunner.runtimeModel=e.model(SDK.RuntimeModel),self.TestRunner.domModel=e.model(SDK.DOMModel),self.TestRunner.domDebuggerModel=e.model(SDK.DOMDebuggerModel),self.TestRunner.cssModel=e.model(SDK.CSSModel),self.TestRunner.cpuProfilerModel=e.model(SDK.CPUProfilerModel),self.TestRunner.overlayModel=e.model(SDK.OverlayModel),self.TestRunner.serviceWorkerManager=e.model(SDK.ServiceWorkerManager),self.TestRunner.tracingManager=e.model(SDK.TracingManager),self.TestRunner.mainTarget=e}(e),He||(He=!0,V(`\n      <head>\n        <base href="${Ke()}">\n      </head>\n      <body>\n      </body>\n    `).then((()=>Ve())))}targetRemoved(e){}}SDK.targetManager.observeTargets(new Ge);export{$e as TestRunner,Ge as _TestObserver,Ve as _executeTestScript};
